/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{_ as e,u as a,a as l,o as t,c as i,b as s,d as r,w as o,O as u,P as d,h as n,g as p,t as m,j as c,au as v,E as B,l as g}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                *//* empty css                              *//* empty css                                   *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               */import{E as C,a as f}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                */import{E as y}from"./087AC4D233B64EB0link.7ea6995b.js";import{a as b,E}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                               */import{d as j,a as A,b as D}from"./087AC4D233B64EB0tack.f6fb0d39.js";import{E as h,a as w}from"./087AC4D233B64EB0index.46727ea4.js";import{E as _}from"./087AC4D233B64EB0index.7d3772ac.js";import{E as k}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const x={class:"gva-search-box"},V={class:"gva-table-box"},z={class:"gva-btn-list"},q={class:"gva-pagination"},S={class:"flex justify-between items-center"},U={class:"text-lg"},F=e(Object.assign({name:"dailyOrWeekly"},{__name:"index",setup(e){const F=a(),O=l([]),I=l({id:""}),T=l([{value:"daily",label:"日常任务"},{value:"weekly",label:"周常任务"}]),P=l(""),K=l({id:[{required:!0,message:"请输入id",trigger:"blur"}],desc:[{required:!0,message:"请输入desc",trigger:"blur"}],complete:[{required:!0,message:"请选择请求方式",trigger:"blur"}],award:[{required:!0,message:"请输入api介绍",trigger:"blur"}]}),L=l(1),M=l(0),N=l(9999),Q=l([]),R=l({type:"日常任务"}),W=()=>{R.value={type:"日常任务"}},G=()=>{L.value=1,N.value=9999,X()},H=e=>{N.value=e},J=e=>{L.value=e},X=async()=>{"日常任务"==R.value.type&&(R.value.type="daily");const e=await j({page:L.value,pageSize:N.value,...R.value});0===e.code&&(Q.value=e.data,M.value=e.data.total,L.value=e.data.page,N.value=e.data.pageSize)};X();const Y=e=>{O.value=e},Z=l(null),$=l("新增"),ee=l(!1),ae=()=>{Z.value.resetFields(),I.value={id:""},ee.value=!1},le=async()=>{Z.value.validate((async e=>{if(e)if("add"===P.value){I.value.id=Number(I.value.id),I.value.type=R.value.type;const e=await A(I.value);0===e.code&&c({type:"success",message:e.msg,showClose:!0}),X(),ae()}else c({type:"error",message:"未知操作",showClose:!0})}))};return(e,a)=>{const l=h,j=w,A=b,O=B,te=E,ie=C,se=y,re=f,oe=_,ue=g,de=k;return t(),i("div",null,[s("div",x,[r(te,{ref:"searchForm",inline:!0,model:R.value},{default:o((()=>[r(A,{label:"日/周"},{default:o((()=>[r(j,{modelValue:R.value.type,"onUpdate:modelValue":a[0]||(a[0]=e=>R.value.type=e),clearable:"",placeholder:"请选择"},{default:o((()=>[(t(!0),i(u,null,d(T.value,(e=>(t(),n(l,{key:e.value,label:"".concat(e.label),value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),r(A,null,{default:o((()=>[r(O,{type:"primary",icon:"search",onClick:G},{default:o((()=>[p(" 查询 ")])),_:1}),r(O,{icon:"refresh",onClick:W},{default:o((()=>[p(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",V,[s("div",z,[r(O,{type:"primary",icon:"plus",onClick:a[1]||(a[1]=e=>(e=>{switch(e){case"add":$.value="新增";break;case"edit":$.value="编辑"}P.value=e,ee.value=!0})("add"))},{default:o((()=>[p(" 新增 ")])),_:1})]),r(re,{border:"",data:Q.value,onSortChange:e.sortChange,onSelectionChange:Y},{default:o((()=>[r(ie,{type:"selection",width:"60"}),r(ie,{align:"center","min-width":"90",label:"id",prop:"id"},{default:o((e=>[r(se,{type:"primary",onClick:a=>(e=>{let a={};a.id=e,F.push({name:"taskDetails",query:a})})(e.row.id)},{default:o((()=>[p(m(e.row.id),1)])),_:2},1032,["onClick"])])),_:1}),r(ie,{align:"center",label:"desc","min-width":"150",prop:"desc"}),r(ie,{align:"center",label:"模版","min-width":"170",prop:"complete"},{default:o((e=>[s("div",null,m(e.row.complete),1)])),_:1}),r(ie,{align:"center",label:"奖励","min-width":"200",prop:"award"},{default:o((e=>[s("div",null,m(e.row.award),1)])),_:1}),r(ie,{align:"center",label:"unlock","min-width":"150",prop:"unlock"},{default:o((e=>[s("div",null,m(e.row.unlock),1)])),_:1}),r(ie,{align:"center",label:"标签","min-width":"150",prop:"tag"}),r(ie,{align:"center",label:"before","min-width":"150",prop:"before"}),r(ie,{align:"center",fixed:"right",label:"操作",width:"200"},{default:o((e=>[r(O,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{v.confirm("此操作将永久删除任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await D({id:e.id,type:R.value.type})).code&&(c({type:"success",message:"删除成功!"}),X())}))})(e.row)},{default:o((()=>[p(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSortChange"]),s("div",q,[r(oe,{"current-page":L.value,"page-size":N.value,"page-sizes":[10,30,50,100],total:M.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:J,onSizeChange:H},null,8,["current-page","page-size","total"])])]),r(de,{modelValue:ee.value,"onUpdate:modelValue":a[3]||(a[3]=e=>ee.value=e),size:"40%","before-close":ae,"show-close":!1},{header:o((()=>[s("div",S,[s("span",U,m($.value),1),s("div",null,[r(O,{onClick:ae},{default:o((()=>[p(" 取 消 ")])),_:1}),r(O,{type:"primary",onClick:le},{default:o((()=>[p(" 确 定 ")])),_:1})])])])),default:o((()=>[r(te,{class:"myForm",ref_key:"apiForm",ref:Z,model:I.value,rules:K.value,"label-width":"80px"},{default:o((()=>[r(A,{label:"ID",prop:"id"},{default:o((()=>[r(ue,{modelValue:I.value.id,"onUpdate:modelValue":a[2]||(a[2]=e=>I.value.id=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-244c1649"]]);export{F as default};
