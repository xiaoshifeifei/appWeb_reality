/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{v as e,_ as a,u as l,a as t,T as o,o as u,c as s,b as d,d as i,w as r,g as n,h as p,t as m,O as c,P as v,e as f,j as g,E as B,l as b,p as h,i as y}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                */import{E as C,a as E}from"./087AC4D233B64EB0col.8e8483c8.js";/* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               *//* empty css                              */import{E as w}from"./087AC4D233B64EB0input-number.525084f9.js";/* empty css                                   */import{E as V,a as j}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                */import{E as _}from"./087AC4D233B64EB0switch.4d3b2bd4.js";import{a as A,E as D}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                               */import{g as x}from"./087AC4D233B64EB0authority.6f3dd0e4.js";import{E as k}from"./087AC4D233B64EB0index.7d3772ac.js";import{E as U,a as I}from"./087AC4D233B64EB0index.46727ea4.js";import{E as S}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0index.9bcf7e3e.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const z=e=>(h("data-v-9e466af4"),e=e(),y(),e),N={class:"gva-search-box"},O={class:"gva-table-box"},q={class:"gva-pagination"},T={class:"flex justify-between items-center"},J={class:"text-lg"},F=z((()=>d("div",{style:{"padding-left":"40px",color:"black","font-size":"16px"}}," 模版 ",-1))),P=z((()=>d("div",{style:{"padding-left":"40px",color:"black","font-size":"16px"}}," 奖励 ",-1))),L=a(Object.assign({name:"userInfo"},{__name:"index",setup(a){l();const h=t([]),y=t({id:"",before:0,desc:"",complete:{value:0,value2:0,limit:0},award:{code:"",num:0},unlock:"",tag:""});t([{value:"POST",label:"创建",type:"success"},{value:"GET",label:"查看",type:""},{value:"PUT",label:"更新",type:"warning"},{value:"DELETE",label:"删除",type:"danger"}]);const z=t(""),L=t({id:[{required:!0,message:"请输入id",trigger:"blur"}],desc:[{required:!0,message:"请输入desc",trigger:"blur"}],complete:[{required:!0,message:"请选择类型",trigger:"blur"}],award:[{required:!0,message:"请选择类型",trigger:"blur"}]}),G=t(1),K=t(0),M=t(10),Q=t([]),R=t({}),H=t([{label:101,value:101},{label:102,value:102},{label:103,value:103},{label:104,value:104},{label:105,value:105},{label:106,value:106},{label:107,value:107}]);o((()=>Q.value),(()=>{W()}));const W=()=>{Q.value&&Q.value.forEach((e=>{e.authorityIds=e.authorities&&e.authorities.map((e=>e.authorityId))}))},X=t([]),Y=(e,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const l={authorityId:e.authorityId,authorityName:e.authorityName,children:[]};Y(e.children,l.children),a.push(l)}else{const l={authorityId:e.authorityId,authorityName:e.authorityName};a.push(l)}}))},Z=async a=>{let l=JSON.parse(JSON.stringify(a)),t={accountId:l.accountId,status:l.status};var o;0===(await(o=t,e({url:"/user/edit",method:"post",data:o}))).code&&(g({type:"success",message:"".concat(0===t.status?"禁用":"启用","成功")}),await te())};t(!1);const $=()=>{R.value={}},ee=()=>{G.value=1,M.value=10,te()},ae=e=>{M.value=e,te()},le=e=>{G.value=e,te()},te=async()=>{const a=await(l={page:G.value,pageSize:M.value,...R.value},e({url:"/user/list",method:"get",params:l}));var l;0===a.code&&(Q.value=a.data.list,K.value=a.data.total,G.value=a.data.page,M.value=a.data.pageSize)};(async()=>{te();const e=await x({page:1,pageSize:999});var a;a=e.data.list,X.value=[],Y(a,X.value)})();const oe=e=>{h.value=e};t({newApis:[],deleteApis:[],ignoreApis:[]}),t(!1);const ue=t(null),se=t("新增"),de=t(!1),ie=()=>{ue.value.resetFields(),y.value={id:"",before:0,desc:"",complete:{value:0,value2:0,limit:0},award:{code:"",num:0},unlock:"",tag:""},de.value=!1},re=async()=>{ue.value.validate((async a=>{if(a)switch(y.value.complete=JSON.stringify([y.value.complete]),y.value.award=JSON.stringify([y.value.award]),y.value.unlock=JSON.stringify([y.value.unlock]),z.value){case"add":y.value.id=Number(y.value.id);0===(await(l=y.value,e({url:"/config/mission/add",method:"post",data:l}))).code&&g({type:"success",message:"添加成功",showClose:!0}),te(),ie();break;case"edit":{const a=await(a=>e({url:"/config/mission/edit",method:"post",data:a}))(y.value);0===a.code&&g({type:"success",message:"编辑成功",showClose:!0}),te(),ie()}break;default:g({type:"error",message:"未知操作",showClose:!0})}var l}))};return(e,a)=>{const l=B,t=A,o=D,g=V,h=_,x=j,z=k,W=b,X=w,Y=U,te=I,ne=C,pe=E,me=S;return u(),s("div",null,[d("div",N,[i(o,{ref:"searchForm",inline:!0,model:R.value},{default:r((()=>[i(t,null,{default:r((()=>[i(l,{type:"primary",icon:"search",onClick:ee},{default:r((()=>[n(" 查询 ")])),_:1}),i(l,{icon:"refresh",onClick:$},{default:r((()=>[n(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model"])]),d("div",O,[i(x,{border:"",data:Q.value,onSortChange:e.sortChange,onSelectionChange:oe},{default:r((()=>[i(g,{type:"selection",width:"60"}),i(g,{align:"center","min-width":"90",label:"id",prop:"accountId"}),i(g,{align:"center",label:"用户名","min-width":"150",prop:"username"}),i(g,{align:"center",label:"手机号","min-width":"170",prop:"phone"}),i(g,{align:"center",label:"邮箱","min-width":"200",prop:"email"}),i(g,{align:"center",label:"启用","min-width":"150"},{default:r((e=>[i(h,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"inline-prompt":"","active-value":0,"inactive-value":1,onChange:()=>{Z(e.row)}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),i(g,{align:"center",fixed:"right",label:"操作",width:"200"})])),_:1},8,["data","onSortChange"]),d("div",q,[i(z,{"current-page":G.value,"page-size":M.value,"page-sizes":[10,30,50,100],total:K.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:le,onSizeChange:ae},null,8,["current-page","page-size","total"])])]),de.value?(u(),p(me,{key:0,modelValue:de.value,"onUpdate:modelValue":a[12]||(a[12]=e=>de.value=e),size:"60%","before-close":ie,"show-close":!1},{header:r((()=>[d("div",T,[d("span",J,m(se.value),1),d("div",null,[i(l,{onClick:ie},{default:r((()=>[n(" 取 消 ")])),_:1}),i(l,{type:"primary",onClick:re},{default:r((()=>[n(" 确 定 ")])),_:1})])])])),default:r((()=>[i(o,{class:"myForm",ref_key:"apiForm",ref:ue,model:y.value,rules:L.value,"label-width":"80px"},{default:r((()=>[i(t,{label:"ID",prop:"id"},{default:r((()=>[i(W,{modelValue:y.value.id,"onUpdate:modelValue":a[0]||(a[0]=e=>y.value.id=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(t,{label:"before",prop:"before"},{default:r((()=>[i(X,{modelValue:y.value.before,"onUpdate:modelValue":a[1]||(a[1]=e=>y.value.before=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(t,{label:"desc",prop:"desc"},{default:r((()=>[i(W,{modelValue:y.value.desc,"onUpdate:modelValue":a[2]||(a[2]=e=>y.value.desc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),F,i(pe,{class:"w-full"},{default:r((()=>[i(ne,{span:8},{default:r((()=>[i(t,{label:"type",prop:"complete"},{default:r((()=>[i(te,{modelValue:y.value.complete.type,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value.complete.type=e),style:{width:"100%"},placeholder:"type"},{default:r((()=>[(u(!0),s(c,null,v(H.value,(e=>(u(),p(Y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(ne,{span:8},{default:r((()=>[i(t,{label:"value"},{default:r((()=>[i(W,{modelValue:y.value.complete.value,"onUpdate:modelValue":a[4]||(a[4]=e=>y.value.complete.value=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),i(ne,{span:8},{default:r((()=>[i(t,{label:"value2"},{default:r((()=>[i(W,{modelValue:y.value.complete.value2,"onUpdate:modelValue":a[5]||(a[5]=e=>y.value.complete.value2=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),i(ne,{span:8},{default:r((()=>[i(t,{label:"limit"},{default:r((()=>[i(W,{modelValue:y.value.complete.limit,"onUpdate:modelValue":a[6]||(a[6]=e=>y.value.complete.limit=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),P,i(pe,{class:"w-full"},{default:r((()=>[i(ne,{span:8},{default:r((()=>[i(t,{label:"type",prop:"complete"},{default:r((()=>[i(te,{modelValue:y.value.award.type,"onUpdate:modelValue":a[7]||(a[7]=e=>y.value.award.type=e),style:{width:"100%"},placeholder:"type"},{default:r((()=>[(u(!0),s(c,null,v(H.value,(e=>(u(),p(Y,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(ne,{span:8},{default:r((()=>[i(t,{label:"code"},{default:r((()=>[i(W,{modelValue:y.value.award.code,"onUpdate:modelValue":a[8]||(a[8]=e=>y.value.award.code=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1}),i(ne,{span:8},{default:r((()=>[i(t,{label:"num"},{default:r((()=>[i(W,{modelValue:y.value.award.num,"onUpdate:modelValue":a[9]||(a[9]=e=>y.value.award.num=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(t,{label:"解锁",prop:"unlock"},{default:r((()=>[i(W,{modelValue:y.value.unlock.value,"onUpdate:modelValue":a[10]||(a[10]=e=>y.value.unlock.value=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),i(t,{label:"标签",prop:"tag"},{default:r((()=>[i(W,{modelValue:y.value.tag,"onUpdate:modelValue":a[11]||(a[11]=e=>y.value.tag=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):f("",!0)])}}}),[["__scopeId","data-v-9e466af4"]]);export{L as default};
