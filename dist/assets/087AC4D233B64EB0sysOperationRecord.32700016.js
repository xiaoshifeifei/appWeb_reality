/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{C as e,aA as t,x as a,F as l,y as o,a as r,G as s,aJ as i,o as n,h as p,w as d,c as u,n as c,t as f,e as m,B as v,g as b,bn as B,K as h,dH as g,L as y,v as w,ad as C,b as A,d as E,at as j,au as D,j as _,l as x,E as k,J as S}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                                   *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               */import{E as O,a as R}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                *//* empty css                                */import{a as V,E as z}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                               *//* empty css                              */import{E as N}from"./087AC4D233B64EB0index.25218fc3.js";import{b as U,u as I,E as T}from"./087AC4D233B64EB0index.c39333f3.js";import{d as $}from"./087AC4D233B64EB0dropdown.a1b79710.js";import{E as H}from"./087AC4D233B64EB0index.7d3772ac.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0index.46727ea4.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";const J=e({trigger:U.trigger,placement:$.placement,disabled:U.disabled,visible:I.visible,transition:I.transition,popperOptions:$.popperOptions,tabindex:$.tabindex,content:I.content,popperStyle:I.popperStyle,popperClass:I.popperClass,enterable:{...I.enterable,default:!0},effect:{...I.effect,default:"light"},teleported:I.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),L={"update:visible":e=>t(e),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},q=a({name:"ElPopover"}),F=a({...q,props:J,emits:L,setup(e,{expose:t,emit:a}){const h=e,g=l((()=>h["onUpdate:visible"])),y=o("popover"),w=r(),C=l((()=>{var e;return null==(e=s(w))?void 0:e.popperRef})),A=l((()=>[{width:i(h.width)},h.popperStyle])),E=l((()=>[y.b(),h.popperClass,{[y.m("plain")]:!!h.content}])),j=l((()=>h.transition==="".concat(y.namespace.value,"-fade-in-linear"))),D=()=>{a("before-enter")},_=()=>{a("before-leave")},x=()=>{a("after-enter")},k=()=>{a("update:visible",!1),a("after-leave")};return t({popperRef:C,hide:()=>{var e;null==(e=w.value)||e.hide()}}),(e,t)=>(n(),p(s(T),B({ref_key:"tooltipRef",ref:w},e.$attrs,{trigger:e.trigger,placement:e.placement,disabled:e.disabled,visible:e.visible,transition:e.transition,"popper-options":e.popperOptions,tabindex:e.tabindex,content:e.content,offset:e.offset,"show-after":e.showAfter,"hide-after":e.hideAfter,"auto-close":e.autoClose,"show-arrow":e.showArrow,"aria-label":e.title,effect:e.effect,enterable:e.enterable,"popper-class":s(E),"popper-style":s(A),teleported:e.teleported,persistent:e.persistent,"gpu-acceleration":s(j),"onUpdate:visible":s(g),onBeforeShow:D,onBeforeHide:_,onShow:x,onHide:k}),{content:d((()=>[e.title?(n(),u("div",{key:0,class:c(s(y).e("title")),role:"title"},f(e.title),3)):m("v-if",!0),v(e.$slots,"default",{},(()=>[b(f(e.content),1)]))])),default:d((()=>[e.$slots.reference?v(e.$slots,"reference",{key:0}):m("v-if",!0)])),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});const K=(e,t)=>{const a=t.arg||t.value,l=null==a?void 0:a.popperRef;l&&(l.triggerRef=e)};const P=y(h(F,[["__file","popover.vue"]]),{directive:g({mounted(e,t){K(e,t)},updated(e,t){K(e,t)}},"popover")}),G={class:"gva-search-box"},M={class:"gva-table-box"},Q={class:"gva-btn-list"},W={class:"popover-box"},X={key:1},Y={class:"popover-box"},Z={key:1},ee={class:"gva-pagination"},te=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(e){const t=r(1),a=r(0),l=r(10),o=r([]),i=r({}),c=()=>{i.value={}},m=()=>{t.value=1,l.value=10,""===i.value.status&&(i.value.status=null),h()},v=e=>{l.value=e,h()},B=e=>{t.value=e,h()},h=async()=>{const e=await(r={page:t.value,pageSize:l.value,...i.value},w({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:r}));var r;0===e.code&&(o.value=e.data.list,a.value=e.data.total,t.value=e.data.page,l.value=e.data.pageSize)};h();const g=r([]),y=e=>{g.value=e},U=async()=>{D.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];g.value&&g.value.forEach((t=>{e.push(t.ID)}));var a;0===(await(a={ids:e},w({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:a}))).code&&(_({type:"success",message:"删除成功"}),o.value.length===e.length&&t.value>1&&t.value--,h())}))},I=async e=>{D.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var a;0===(await(a={ID:e.ID},w({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:a}))).code&&(_({type:"success",message:"删除成功"}),1===o.value.length&&t.value>1&&t.value--,h())}))},T=e=>{try{return JSON.parse(e)}catch(t){return e}};return(e,r)=>{const h=x,w=V,D=k,_=z,$=O,J=N,L=C("warning"),q=S,F=P,K=R,te=H;return n(),u("div",null,[A("div",G,[E(_,{inline:!0,model:i.value},{default:d((()=>[E(w,{label:"请求方法"},{default:d((()=>[E(h,{modelValue:i.value.method,"onUpdate:modelValue":r[0]||(r[0]=e=>i.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,{label:"请求路径"},{default:d((()=>[E(h,{modelValue:i.value.path,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,{label:"结果状态码"},{default:d((()=>[E(h,{modelValue:i.value.status,"onUpdate:modelValue":r[2]||(r[2]=e=>i.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),E(w,null,{default:d((()=>[E(D,{type:"primary",icon:"search",onClick:m},{default:d((()=>[b("查询")])),_:1}),E(D,{icon:"refresh",onClick:c},{default:d((()=>[b("重置")])),_:1})])),_:1})])),_:1},8,["model"])]),A("div",M,[A("div",Q,[E(D,{icon:"delete",disabled:!g.value.length,onClick:U},{default:d((()=>[b("删除")])),_:1},8,["disabled"])]),E(K,{ref:"multipleTable",data:o.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:y},{default:d((()=>[E($,{align:"left",type:"selection",width:"55"}),E($,{align:"left",label:"操作人",width:"140"},{default:d((e=>[A("div",null,f(e.row.user.userName)+"("+f(e.row.user.nickName)+")",1)])),_:1}),E($,{align:"left",label:"日期",width:"180"},{default:d((e=>[b(f(s(j)(e.row.CreatedAt)),1)])),_:1}),E($,{align:"left",label:"状态码",prop:"status",width:"120"},{default:d((e=>[A("div",null,[E(J,{type:"success"},{default:d((()=>[b(f(e.row.status),1)])),_:2},1024)])])),_:1}),E($,{align:"left",label:"请求IP",prop:"ip",width:"120"}),E($,{align:"left",label:"请求方法",prop:"method",width:"120"}),E($,{align:"left",label:"请求路径",prop:"path",width:"240"}),E($,{align:"left",label:"请求",prop:"path",width:"80"},{default:d((e=>[A("div",null,[e.row.body?(n(),p(F,{key:0,placement:"left-start",width:444},{reference:d((()=>[E(q,{style:{cursor:"pointer"}},{default:d((()=>[E(L)])),_:1})])),default:d((()=>[A("div",W,[A("pre",null,f(T(e.row.body)),1)])])),_:2},1024)):(n(),u("span",X,"无"))])])),_:1}),E($,{align:"left",label:"响应",prop:"path",width:"80"},{default:d((e=>[A("div",null,[e.row.resp?(n(),p(F,{key:0,placement:"left-start",width:444},{reference:d((()=>[E(q,{style:{cursor:"pointer"}},{default:d((()=>[E(L)])),_:1})])),default:d((()=>[A("div",Y,[A("pre",null,f(T(e.row.resp)),1)])])),_:2},1024)):(n(),u("span",Z,"无"))])])),_:1}),E($,{align:"left",label:"操作"},{default:d((e=>[E(D,{icon:"delete",type:"primary",link:"",onClick:t=>I(e.row)},{default:d((()=>[b("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),A("div",ee,[E(te,{"current-page":t.value,"page-size":l.value,"page-sizes":[10,30,50,100],total:a.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:B,onSizeChange:v},null,8,["current-page","page-size","total"])])])])}}});export{te as default};
