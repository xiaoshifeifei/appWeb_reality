/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{_ as e,r as l,V as a,dA as t,a as o,o as u,c as n,b as d,d as i,w as s,g as p,t as r,h as m,I as c,e as f,O as v,P as B,G as h,dB as b,dC as _,au as w,dD as y,j as g,dE as D,dF as C,dG as V,E,J as A,l as j,p as k,i as x}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                */import{a as I,E as U}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                                *//* empty css                               */import{E as q}from"./087AC4D233B64EB0radio.ce0b8ca9.js";/* empty css                              *//* empty css                            */import{E as N}from"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                  */import{E as T,a as M}from"./087AC4D233B64EB0col.8e8483c8.js";/* empty css                               */import{E as P,a as z}from"./087AC4D233B64EB0table-column.87522e19.js";/* empty css                               */import F from"./087AC4D233B64EB0icon.3d81fe69.js";import{_ as O}from"./087AC4D233B64EB0warningBar.fba111b1.js";import{c as S}from"./087AC4D233B64EB0authorityBtn.0366f024.js";import{t as G}from"./087AC4D233B64EB0doc.46160848.js";import{a as K}from"./087AC4D233B64EB0stringFun.647a78e9.js";import{E as $,a as H}from"./087AC4D233B64EB0index.46727ea4.js";import{E as J}from"./087AC4D233B64EB0index.c39333f3.js";import{E as L}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0arrays.2c626d3b.js";import"./087AC4D233B64EB0cloneDeep.17c0bdec.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const Q=e=>(k("data-v-1d70415b"),e=e(),x(),e),R={class:"gva-table-box"},W={class:"gva-btn-list"},X={key:0,class:"icon-column"},Y={class:"flex justify-between items-center"},Z={class:"text-lg"},ee=Q((()=>d("span",{style:{"font-size":"12px","margin-right":"12px"}},"如果菜单包含子菜单，请创建router-view二级路由页面或者",-1))),le={style:{display:"inline-flex","align-items":"center"}},ae=Q((()=>d("span",null,"路由Path",-1))),te=Q((()=>d("span",null," 高亮菜单 ",-1))),oe=Q((()=>d("span",null," 是否为基础页面 ",-1))),ue={class:"flex items-center gap-2"},ne={class:"flex items-center gap-2 mt-3"},de=e(Object.assign({name:"Menus"},{__name:"menu",setup(e){const k=l({});a((()=>{for(let e in t)k[e.replace(/^\/src\//,"")]=t[e]}));const x=l({path:[{required:!0,message:"请输入菜单name",trigger:"blur"}],component:[{required:!0,message:"请输入文件路径",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单展示名称",trigger:"blur"}]}),Q=o([]),de=async()=>{const e=await _({page:1,pageSize:999});0===e.code&&(Q.value=e.data.list)};de();const ie=()=>{se.value.component=se.value.component.replace(/\\/g,"/"),se.value.name=K(k[se.value.component]),se.value.path=se.value.name},se=o({ID:0,path:"",name:"",hidden:!1,parentId:0,component:"",meta:{activeName:"",title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1},parameters:[],menuBtn:[]}),pe=()=>{se.value.path=se.value.name},re=e=>{fe(),e()},me=o(null),ce=o(!1),fe=()=>{ce.value=!1,me.value.resetFields(),se.value={ID:0,path:"",name:"",hidden:!1,parentId:0,component:"",meta:{title:"",icon:"",defaultMenu:!1,closeTab:!1,keepAlive:!1}}},ve=o(!1),Be=()=>{fe(),ve.value=!1},he=async()=>{me.value.validate((async e=>{if(e){let e;e=ye.value?await D(se.value):await C(se.value),0===e.code&&(g({type:"success",message:ye.value?"编辑成功":"添加成功!"}),de()),fe(),ve.value=!1}}))},be=o([{ID:"0",title:"根菜单"}]),_e=()=>{be.value=[{ID:0,title:"根目录"}],we(Q.value,be.value,!1)},we=(e,l,a)=>{e&&e.forEach((e=>{if(e.children&&e.children.length){const t={title:e.meta.title,ID:e.ID,disabled:a||e.ID===se.value.ID,children:[]};we(e.children,t.children,a||e.ID===se.value.ID),l.push(t)}else{const t={title:e.meta.title,ID:e.ID,disabled:a||e.ID===se.value.ID};l.push(t)}}))},ye=o(!1),ge=o("新增菜单"),De=e=>{ge.value="新增菜单",se.value.parentId=e,ye.value=!1,_e(),ve.value=!0};return(e,l)=>{const a=E,t=P,o=A,_=z,D=$,C=H,K=I,fe=T,we=j,Ce=M,Ve=N,Ee=q,Ae=J,je=U,ke=L;return u(),n("div",null,[d("div",R,[d("div",W,[i(a,{type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>De(0))},{default:s((()=>[p(" 新增根菜单 ")])),_:1})]),i(_,{data:Q.value,"row-key":"ID"},{default:s((()=>[i(t,{align:"left",label:"ID","min-width":"100",prop:"ID"}),i(t,{align:"left",label:"展示名称","min-width":"120",prop:"authorityName"},{default:s((e=>[d("span",null,r(e.row.meta.title),1)])),_:1}),i(t,{align:"left",label:"图标","min-width":"140",prop:"authorityName"},{default:s((e=>[e.row.meta.icon?(u(),n("div",X,[i(o,null,{default:s((()=>[(u(),m(c(e.row.meta.icon)))])),_:2},1024),d("span",null,r(e.row.meta.icon),1)])):f("",!0)])),_:1}),i(t,{align:"left",label:"路由Name","show-overflow-tooltip":"","min-width":"160",prop:"name"}),i(t,{align:"left",label:"路由Path","show-overflow-tooltip":"","min-width":"160",prop:"path"}),i(t,{align:"left",label:"是否隐藏","min-width":"100",prop:"hidden"},{default:s((e=>[d("span",null,r(e.row.hidden?"隐藏":"显示"),1)])),_:1}),i(t,{align:"left",label:"父节点","min-width":"90",prop:"parentId"}),i(t,{align:"left",label:"排序","min-width":"70",prop:"sort"}),i(t,{align:"left",label:"文件路径","min-width":"360",prop:"component"}),i(t,{align:"left",fixed:"right",label:"操作",width:"300"},{default:s((e=>[i(a,{type:"primary",link:"",icon:"plus",onClick:l=>De(e.row.ID)},{default:s((()=>[p(" 添加子菜单 ")])),_:2},1032,["onClick"]),i(a,{type:"primary",link:"",icon:"edit",onClick:l=>(async e=>{ge.value="编辑菜单";const l=await V({id:e});se.value=l.data.menu,ye.value=!0,_e(),ve.value=!0})(e.row.ID)},{default:s((()=>[p(" 编辑 ")])),_:2},1032,["onClick"]),i(a,{type:"primary",link:"",icon:"delete",onClick:l=>{return a=e.row.ID,void w.confirm("此操作将永久删除所有角色下该菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await y({ID:a})).code&&(g({type:"success",message:"删除成功!"}),de())})).catch((()=>{g({type:"info",message:"已取消删除"})}));var a}},{default:s((()=>[p(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),i(ke,{modelValue:ve.value,"onUpdate:modelValue":l[17]||(l[17]=e=>ve.value=e),size:"60%","before-close":re,"show-close":!1},{header:s((()=>[d("div",Y,[d("span",Z,r(ge.value),1),d("div",null,[i(a,{onClick:Be},{default:s((()=>[p(" 取 消 ")])),_:1}),i(a,{type:"primary",onClick:he},{default:s((()=>[p(" 确 定 ")])),_:1})])])])),default:s((()=>[i(O,{title:"新增菜单，需要在角色管理内配置权限才可使用"}),ve.value?(u(),m(je,{key:0,ref_key:"menuForm",ref:me,inline:!0,model:se.value,rules:x,"label-position":"top"},{default:s((()=>[i(Ce,{class:"w-full"},{default:s((()=>[i(fe,{span:16},{default:s((()=>[i(K,{label:"文件路径",prop:"component"},{default:s((()=>[i(C,{modelValue:se.value.component,"onUpdate:modelValue":l[1]||(l[1]=e=>se.value.component=e),filterable:"","allow-create":"",autocomplete:"off",style:{width:"100%"},placeholder:"页面:view/xxx/xx.vue 插件:plugin/xx/xx.vue","default-first-option":"",onChange:ie},{default:s((()=>[(u(!0),n(v,null,B(k,((e,l)=>(u(),m(D,{key:l,label:l,value:l},null,8,["label","value"])))),128))])),_:1},8,["modelValue"]),ee,i(a,{style:{"margin-top":"4px"},onClick:l[2]||(l[2]=e=>se.value.component="view/routerHolder.vue")},{default:s((()=>[p(" 点我设置 ")])),_:1})])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"展示名称",prop:"meta.title"},{default:s((()=>[i(we,{modelValue:se.value.meta.title,"onUpdate:modelValue":l[3]||(l[3]=e=>se.value.meta.title=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(Ce,{class:"w-full"},{default:s((()=>[i(fe,{span:8},{default:s((()=>[i(K,{label:"路由Name",prop:"path"},{default:s((()=>[i(we,{modelValue:se.value.name,"onUpdate:modelValue":l[4]||(l[4]=e=>se.value.name=e),autocomplete:"off",placeholder:"唯一英文字符串",onChange:pe},null,8,["modelValue"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{prop:"path"},{label:s((()=>[d("span",le,[ae,i(Ve,{modelValue:ce.value,"onUpdate:modelValue":l[5]||(l[5]=e=>ce.value=e),style:{"margin-left":"12px",height:"auto"}},{default:s((()=>[p("添加参数")])),_:1},8,["modelValue"])])])),default:s((()=>[i(we,{modelValue:se.value.path,"onUpdate:modelValue":l[6]||(l[6]=e=>se.value.path=e),disabled:!ce.value,autocomplete:"off",placeholder:"建议只在后方拼接参数"},null,8,["modelValue","disabled"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"是否隐藏"},{default:s((()=>[i(C,{modelValue:se.value.hidden,"onUpdate:modelValue":l[7]||(l[7]=e=>se.value.hidden=e),style:{width:"100%"},placeholder:"是否在列表隐藏"},{default:s((()=>[i(D,{value:!1,label:"否"}),i(D,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(Ce,{class:"w-full"},{default:s((()=>[i(fe,{span:8},{default:s((()=>[i(K,{label:"父节点ID"},{default:s((()=>[i(Ee,{modelValue:se.value.parentId,"onUpdate:modelValue":l[8]||(l[8]=e=>se.value.parentId=e),style:{width:"100%"},disabled:!ye.value,options:be.value,props:{checkStrictly:!0,label:"title",value:"ID",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"图标",prop:"meta.icon"},{default:s((()=>[i(F,{meta:se.value.meta},null,8,["meta"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"排序标记",prop:"sort"},{default:s((()=>[i(we,{modelValue:se.value.sort,"onUpdate:modelValue":l[9]||(l[9]=e=>se.value.sort=e),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(Ce,{class:"w-full"},{default:s((()=>[i(fe,{span:8},{default:s((()=>[i(K,{prop:"meta.activeName"},{label:s((()=>[d("div",null,[te,i(Ae,{content:"注：当到达此路由时候，指定左侧菜单指定name会处于活跃状态（亮起），可为空，为空则为本路由Name。",placement:"top",effect:"light"},{default:s((()=>[i(o,null,{default:s((()=>[i(h(b))])),_:1})])),_:1})])])),default:s((()=>[i(we,{modelValue:se.value.meta.activeName,"onUpdate:modelValue":l[10]||(l[10]=e=>se.value.meta.activeName=e),placeholder:se.value.name,autocomplete:"off"},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"KeepAlive",prop:"meta.keepAlive"},{default:s((()=>[i(C,{modelValue:se.value.meta.keepAlive,"onUpdate:modelValue":l[11]||(l[11]=e=>se.value.meta.keepAlive=e),style:{width:"100%"},placeholder:"是否keepAlive缓存页面"},{default:s((()=>[i(D,{value:!1,label:"否"}),i(D,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1}),i(fe,{span:8},{default:s((()=>[i(K,{label:"CloseTab",prop:"meta.closeTab"},{default:s((()=>[i(C,{modelValue:se.value.meta.closeTab,"onUpdate:modelValue":l[12]||(l[12]=e=>se.value.meta.closeTab=e),style:{width:"100%"},placeholder:"是否自动关闭tab"},{default:s((()=>[i(D,{value:!1,label:"否"}),i(D,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(Ce,{class:"w-full"},{default:s((()=>[i(fe,{span:8},{default:s((()=>[i(K,null,{label:s((()=>[d("div",null,[oe,i(Ae,{content:"此项选择为是，则不会展示左侧菜单以及顶部信息。",placement:"top",effect:"light"},{default:s((()=>[i(o,null,{default:s((()=>[i(h(b))])),_:1})])),_:1})])])),default:s((()=>[i(C,{modelValue:se.value.meta.defaultMenu,"onUpdate:modelValue":l[13]||(l[13]=e=>se.value.meta.defaultMenu=e),style:{width:"100%"},placeholder:"是否为基础页面"},{default:s((()=>[i(D,{value:!1,label:"否"}),i(D,{value:!0,label:"是"})])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])):f("",!0),d("div",null,[d("div",ue,[i(a,{type:"primary",icon:"edit",onClick:l[14]||(l[14]=e=>{return(l=se.value).parameters||(l.parameters=[]),void l.parameters.push({type:"query",key:"",value:""});var l})},{default:s((()=>[p(" 新增菜单参数 ")])),_:1})]),i(_,{data:se.value.parameters,style:{width:"100%","margin-top":"12px"}},{default:s((()=>[i(t,{align:"left",prop:"type",label:"参数类型",width:"180"},{default:s((e=>[i(C,{modelValue:e.row.type,"onUpdate:modelValue":l=>e.row.type=l,placeholder:"请选择"},{default:s((()=>[i(D,{key:"query",value:"query",label:"query"}),i(D,{key:"params",value:"params",label:"params"})])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1}),i(t,{align:"left",prop:"key",label:"参数key",width:"180"},{default:s((e=>[d("div",null,[i(we,{modelValue:e.row.key,"onUpdate:modelValue":l=>e.row.key=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(t,{align:"left",prop:"value",label:"参数值"},{default:s((e=>[d("div",null,[i(we,{modelValue:e.row.value,"onUpdate:modelValue":l=>e.row.value=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(t,{align:"left"},{default:s((e=>[d("div",null,[i(a,{type:"danger",icon:"delete",onClick:l=>{return a=se.value.parameters,t=e.$index,void a.splice(t,1);var a,t}},{default:s((()=>[p(" 删除 ")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),d("div",ne,[i(a,{type:"primary",icon:"edit",onClick:l[15]||(l[15]=e=>{return(l=se.value).menuBtn||(l.menuBtn=[]),void l.menuBtn.push({name:"",desc:""});var l})},{default:s((()=>[p(" 新增可控按钮 ")])),_:1}),i(o,{class:"cursor-pointer",onClick:l[16]||(l[16]=e=>h(G)("https://www.gin-vue-admin.com/guide/web/button-auth.html"))},{default:s((()=>[i(h(b))])),_:1})]),i(_,{data:se.value.menuBtn,style:{width:"100%","margin-top":"12px"}},{default:s((()=>[i(t,{align:"left",prop:"name",label:"按钮名称",width:"180"},{default:s((e=>[d("div",null,[i(we,{modelValue:e.row.name,"onUpdate:modelValue":l=>e.row.name=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(t,{align:"left",prop:"name",label:"备注",width:"180"},{default:s((e=>[d("div",null,[i(we,{modelValue:e.row.desc,"onUpdate:modelValue":l=>e.row.desc=l},null,8,["modelValue","onUpdate:modelValue"])])])),_:1}),i(t,{align:"left"},{default:s((e=>[d("div",null,[i(a,{type:"danger",icon:"delete",onClick:l=>(async(e,l)=>{const a=e[l];if(0===a.ID)return void e.splice(l,1);0===(await S({id:a.ID})).code&&e.splice(l,1)})(se.value.menuBtn,e.$index)},{default:s((()=>[p(" 删除 ")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"])])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-1d70415b"]]);export{de as default};
