/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{a as e,r as a,ad as t,o as l,c as r,b as s,d as o,w as i,g as n,O as u,e as d,h as p,q as m,t as c,G as v,at as B,dR as C,P as f,au as A,j as g,J as D,E,l as y}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               *//* empty css                              *//* empty css                                   */import{E as j,a as b}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                */import{a as h,E as w}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                               */import{E as _}from"./087AC4D233B64EB0date-picker.a2585bf6.js";import{_ as k,a as x,g as V,b as I,d as T,f as z,e as U,c as S,u as O}from"./087AC4D233B64EB0rich-edit.d40e506e.js";import{g as R}from"./087AC4D233B64EB0image.381f4010.js";import{E as q}from"./087AC4D233B64EB0index.c39333f3.js";import{E as F}from"./087AC4D233B64EB0index.25218fc3.js";import{E as K}from"./087AC4D233B64EB0index.7d3772ac.js";import{E as P,a as Q}from"./087AC4D233B64EB0index.46727ea4.js";import{E as G}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0arrays.2c626d3b.js";import"./087AC4D233B64EB0index.9bcf7e3e.js";/* empty css                               *//* empty css                                 */import"./087AC4D233B64EB0index.e10cda1e.js";import"./087AC4D233B64EB0index.71ec1ce3.js";import"./087AC4D233B64EB0cloneDeep.17c0bdec.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const J={class:"gva-search-box"},L={class:"gva-table-box"},M={class:"gva-btn-list"},N={class:"file-list"},Y={class:"gva-pagination"},Z={class:"flex justify-between items-center"},$={class:"text-lg"},H=Object.assign({name:"Info"},{__name:"info",setup(H){const W=e(!1),X=e({title:"",content:"",userID:void 0,attachments:[]}),ee=e([]);(async()=>{const e=await V();0===e.code&&(ee.value=e.data)})();const ae=a({}),te=a({createdAt:[{validator:(e,a,t)=>{ue.value.startCreatedAt&&!ue.value.endCreatedAt?t(new Error("请填写结束日期")):!ue.value.startCreatedAt&&ue.value.endCreatedAt?t(new Error("请填写开始日期")):ue.value.startCreatedAt&&ue.value.endCreatedAt&&(ue.value.startCreatedAt.getTime()===ue.value.endCreatedAt.getTime()||ue.value.startCreatedAt.getTime()>ue.value.endCreatedAt.getTime())?t(new Error("开始日期应当早于结束日期")):t()},trigger:"change"}]}),le=e(),re=e(),se=e(1),oe=e(0),ie=e(10),ne=e([]),ue=e({}),de=()=>{ue.value={},ve()},pe=()=>{var e;null==(e=re.value)||e.validate((async e=>{e&&(se.value=1,ie.value=10,ve())}))},me=e=>{ie.value=e,ve()},ce=e=>{se.value=e,ve()},ve=async()=>{const e=await I({page:se.value,pageSize:ie.value,...ue.value});0===e.code&&(ne.value=e.data.list,oe.value=e.data.total,se.value=e.data.page,ie.value=e.data.pageSize)};ve();(async()=>{})();const Be=e([]),Ce=e=>{Be.value=e},fe=async()=>{A.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{const e=[];if(0===Be.value.length)return void g({type:"warning",message:"请选择要删除的数据"});Be.value&&Be.value.map((a=>{e.push(a.ID)}));0===(await T({IDs:e})).code&&(g({type:"success",message:"删除成功"}),ne.value.length===e.length&&se.value>1&&se.value--,ve())}))},Ae=e(""),ge=async e=>{0===(await U({ID:e.ID})).code&&(g({type:"success",message:"删除成功"}),1===ne.value.length&&se.value>1&&se.value--,ve())},De=e(!1),Ee=()=>{Ae.value="create",De.value=!0},ye=()=>{De.value=!1,X.value={title:"",content:"",userID:void 0,attachments:[]}},je=async()=>{var e;null==(e=le.value)||e.validate((async e=>{if(!e)return;let a;switch(Ae.value){case"create":default:a=await S(X.value);break;case"update":a=await O(X.value)}0===a.code&&(g({type:"success",message:"创建/更改成功"}),ye(),ve())}))};return(e,a)=>{const g=t("QuestionFilled"),V=D,I=q,T=_,U=h,S=E,O=w,H=j,ve=F,be=b,he=K,we=y,_e=P,ke=Q,xe=G;return l(),r("div",null,[s("div",J,[o(O,{ref_key:"elSearchFormRef",ref:re,inline:!0,model:ue.value,class:"demo-form-inline",rules:te,onKeyup:m(pe,["enter"])},{default:i((()=>[o(U,{label:"创建日期",prop:"createdAt"},{label:i((()=>[s("span",null,[n(" 创建日期 "),o(I,{content:"搜索范围是开始日期（包含）至结束日期（不包含）"},{default:i((()=>[o(V,null,{default:i((()=>[o(g)])),_:1})])),_:1})])])),default:i((()=>[o(T,{modelValue:ue.value.startCreatedAt,"onUpdate:modelValue":a[0]||(a[0]=e=>ue.value.startCreatedAt=e),type:"datetime",placeholder:"开始日期","disabled-date":e=>!!ue.value.endCreatedAt&&e.getTime()>ue.value.endCreatedAt.getTime()},null,8,["modelValue","disabled-date"]),n(" — "),o(T,{modelValue:ue.value.endCreatedAt,"onUpdate:modelValue":a[1]||(a[1]=e=>ue.value.endCreatedAt=e),type:"datetime",placeholder:"结束日期","disabled-date":e=>!!ue.value.startCreatedAt&&e.getTime()<ue.value.startCreatedAt.getTime()},null,8,["modelValue","disabled-date"])])),_:1}),W.value?(l(),r(u,{key:0},[],64)):d("",!0),o(U,null,{default:i((()=>[o(S,{type:"primary",icon:"search",onClick:pe},{default:i((()=>[n(" 查询 ")])),_:1}),o(S,{icon:"refresh",onClick:de},{default:i((()=>[n(" 重置 ")])),_:1}),W.value?(l(),p(S,{key:1,link:"",type:"primary",icon:"arrow-up",onClick:a[3]||(a[3]=e=>W.value=!1)},{default:i((()=>[n(" 收起 ")])),_:1})):(l(),p(S,{key:0,link:"",type:"primary",icon:"arrow-down",onClick:a[2]||(a[2]=e=>W.value=!0)},{default:i((()=>[n(" 展开 ")])),_:1}))])),_:1})])),_:1},8,["model","rules"])]),s("div",L,[s("div",M,[o(S,{type:"primary",icon:"plus",onClick:Ee},{default:i((()=>[n(" 新增 ")])),_:1}),o(S,{icon:"delete",style:{"margin-left":"10px"},disabled:!Be.value.length,onClick:fe},{default:i((()=>[n(" 删除 ")])),_:1},8,["disabled"])]),o(be,{ref:"multipleTable",style:{width:"100%"},"tooltip-effect":"dark",data:ne.value,"row-key":"ID",onSelectionChange:Ce},{default:i((()=>[o(H,{type:"selection",width:"55"}),o(H,{align:"left",label:"日期",prop:"createdAt",width:"180"},{default:i((e=>[n(c(v(B)(e.row.CreatedAt)),1)])),_:1}),o(H,{align:"left",label:"标题",prop:"title",width:"120"}),o(H,{label:"内容",prop:"content",width:"200"},{default:i((e=>[n(" [富文本内容] ")])),_:1}),o(H,{align:"left",label:"作者",prop:"userID",width:"120"},{default:i((e=>[s("span",null,c(v(C)(ee.value.userID,e.row.userID)),1)])),_:1}),o(H,{label:"附件",prop:"attachments",width:"200"},{default:i((e=>[s("div",N,[(l(!0),r(u,null,f(e.row.attachments,(e=>(l(),p(ve,{key:e.uid,onClick:a=>{return t=e.url,void window.open(R(t),"_blank");var t}},{default:i((()=>[n(c(e.name),1)])),_:2},1032,["onClick"])))),128))])])),_:1}),o(H,{align:"left",label:"操作",fixed:"right","min-width":"240"},{default:i((e=>[o(S,{type:"primary",link:"",icon:"edit",class:"table-button",onClick:a=>(async e=>{const a=await z({ID:e.ID});Ae.value="update",0===a.code&&(X.value=a.data,De.value=!0)})(e.row)},{default:i((()=>[n(" 变更 ")])),_:2},1032,["onClick"]),o(S,{type:"primary",link:"",icon:"delete",onClick:a=>{return t=e.row,void A.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{ge(t)}));var t}},{default:i((()=>[n(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",Y,[o(he,{layout:"total, sizes, prev, pager, next, jumper","current-page":se.value,"page-size":ie.value,"page-sizes":[10,30,50,100],total:oe.value,onCurrentChange:ce,onSizeChange:me},null,8,["current-page","page-size","total"])])]),o(xe,{modelValue:De.value,"onUpdate:modelValue":a[8]||(a[8]=e=>De.value=e),"destroy-on-close":"",size:"800","show-close":!1,"before-close":ye},{header:i((()=>[s("div",Z,[s("span",$,c("create"===Ae.value?"添加":"修改"),1),s("div",null,[o(S,{type:"primary",onClick:je},{default:i((()=>[n(" 确 定 ")])),_:1}),o(S,{onClick:ye},{default:i((()=>[n(" 取 消 ")])),_:1})])])])),default:i((()=>[o(O,{ref_key:"elFormRef",ref:le,model:X.value,"label-position":"top",rules:ae,"label-width":"80px"},{default:i((()=>[o(U,{label:"标题:",prop:"title"},{default:i((()=>[o(we,{modelValue:X.value.title,"onUpdate:modelValue":a[4]||(a[4]=e=>X.value.title=e),clearable:!0,placeholder:"请输入标题"},null,8,["modelValue"])])),_:1}),o(U,{label:"内容:",prop:"content"},{default:i((()=>[o(k,{modelValue:X.value.content,"onUpdate:modelValue":a[5]||(a[5]=e=>X.value.content=e)},null,8,["modelValue"])])),_:1}),o(U,{label:"作者:",prop:"userID"},{default:i((()=>[o(ke,{modelValue:X.value.userID,"onUpdate:modelValue":a[6]||(a[6]=e=>X.value.userID=e),placeholder:"请选择作者",style:{width:"100%"},clearable:!0},{default:i((()=>[(l(!0),r(u,null,f(ee.value.userID,((e,a)=>(l(),p(_e,{key:a,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),o(U,{label:"附件:",prop:"attachments"},{default:i((()=>[o(x,{modelValue:X.value.attachments,"onUpdate:modelValue":a[7]||(a[7]=e=>X.value.attachments=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{H as default};
