/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{C as e,ab as l,bY as a,aZ as o,a$ as t,R as u,Y as d,az as s,a as i,T as n,z as r,y as m,F as p,x as c,o as f,c as v,B as b,n as y,G as V,K as B,a8 as g,bf as _,b as h,g as C,t as E,d as A,w as N,a7 as x,J as D,q as j,a3 as T,a2 as S,a5 as U,L as w,M as k,ad as K,O as I,P as O,h as q,e as F,au as J,l as L,E as z}from"./087AC4D233B64EB0index.70d09b05.js";import{E as H,a as P}from"./087AC4D233B64EB0col.8e8483c8.js";/* empty css                            */import{a as $,E as W}from"./087AC4D233B64EB0form-item.cbb99123.js";import{E as M}from"./087AC4D233B64EB0switch.4d3b2bd4.js";import{E as Y}from"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                               *//* empty css                                  *//* empty css                               *//* empty css                               *//* empty css                              */import{a as G,t as R}from"./087AC4D233B64EB0stringFun.647a78e9.js";import{g as Z}from"./087AC4D233B64EB0sysDictionary.41ff4d77.js";import{_ as Q}from"./087AC4D233B64EB0warningBar.fba111b1.js";import{g as X,a as ee}from"./087AC4D233B64EB0autoCode.8131c587.js";import{E as le,a as ae}from"./087AC4D233B64EB0index.46727ea4.js";import{E as oe}from"./087AC4D233B64EB0index.25218fc3.js";import{c as te}from"./087AC4D233B64EB0castArray.0e034210.js";import{E as ue}from"./087AC4D233B64EB0index.8862a37e.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0index.0adebf5a.js";const de=e=>u(e)||d(e)||s(e),se=e({accordion:Boolean,modelValue:{type:l([Array,String,Number]),default:()=>a([])}}),ie={[o]:de,[t]:de},ne=Symbol("collapseContextKey"),re=c({name:"ElCollapse"});var me=B(c({...re,props:se,emits:ie,setup(e,{expose:l,emit:a}){const u=e,{activeNames:d,setActiveNames:s}=((e,l)=>{const a=i(te(e.modelValue)),u=u=>{a.value=u;const d=e.accordion?a.value[0]:a.value;l(o,d),l(t,d)};return n((()=>e.modelValue),(()=>a.value=te(e.modelValue)),{deep:!0}),r(ne,{activeNames:a,handleItemClick:l=>{if(e.accordion)u([a.value[0]===l?"":l]);else{const e=[...a.value],o=e.indexOf(l);o>-1?e.splice(o,1):e.push(l),u(e)}}}),{activeNames:a,setActiveNames:u}})(u,a),{rootKls:c}=(()=>{const e=m("collapse");return{rootKls:p((()=>e.b()))}})();return l({activeNames:d,setActiveNames:s}),(e,l)=>(f(),v("div",{class:y(V(c))},[b(e.$slots,"default")],2))}}),[["__file","collapse.vue"]]);const pe=e({title:{type:String,default:""},name:{type:l([String,Number]),default:void 0},disabled:Boolean}),ce=c({name:"ElCollapseItem"});var fe=B(c({...ce,props:pe,setup(e,{expose:l}){const a=e,{focusing:o,id:t,isActive:u,handleFocus:d,handleHeaderClick:s,handleEnterClick:n}=(e=>{const l=g(ne),{namespace:a}=m("collapse"),o=i(!1),t=i(!1),u=_(),d=p((()=>u.current++)),s=p((()=>{var l;return null!=(l=e.name)?l:"".concat(a.value,"-id-").concat(u.prefix,"-").concat(V(d))})),n=p((()=>null==l?void 0:l.activeNames.value.includes(V(s))));return{focusing:o,id:d,isActive:n,handleFocus:()=>{setTimeout((()=>{t.value?t.value=!1:o.value=!0}),50)},handleHeaderClick:()=>{e.disabled||(null==l||l.handleItemClick(V(s)),o.value=!1,t.value=!0)},handleEnterClick:()=>{null==l||l.handleItemClick(V(s))}}})(a),{arrowKls:r,headKls:c,rootKls:B,itemWrapperKls:w,itemContentKls:k,scopedContentId:K,scopedHeadId:I}=((e,{focusing:l,isActive:a,id:o})=>{const t=m("collapse"),u=p((()=>[t.b("item"),t.is("active",V(a)),t.is("disabled",e.disabled)])),d=p((()=>[t.be("item","header"),t.is("active",V(a)),{focusing:V(l)&&!e.disabled}]));return{arrowKls:p((()=>[t.be("item","arrow"),t.is("active",V(a))])),headKls:d,rootKls:u,itemWrapperKls:p((()=>t.be("item","wrap"))),itemContentKls:p((()=>t.be("item","content"))),scopedContentId:p((()=>t.b("content-".concat(V(o))))),scopedHeadId:p((()=>t.b("head-".concat(V(o)))))}})(a,{focusing:o,isActive:u,id:t});return l({isActive:u}),(e,l)=>(f(),v("div",{class:y(V(B))},[h("button",{id:V(I),class:y(V(c)),"aria-expanded":V(u),"aria-controls":V(K),"aria-describedby":V(K),tabindex:e.disabled?-1:0,type:"button",onClick:V(s),onKeydown:j(T(V(n),["stop","prevent"]),["space","enter"]),onFocus:V(d),onBlur:e=>o.value=!1},[b(e.$slots,"title",{},(()=>[C(E(e.title),1)])),A(V(D),{class:y(V(r))},{default:N((()=>[A(V(x))])),_:1},8,["class"])],42,["id","aria-expanded","aria-controls","aria-describedby","tabindex","onClick","onKeydown","onFocus","onBlur"]),A(V(ue),null,{default:N((()=>[S(h("div",{id:V(K),role:"region",class:y(V(w)),"aria-hidden":!V(u),"aria-labelledby":V(I)},[h("div",{class:y(V(k))},[b(e.$slots,"default")],2)],10,["id","aria-hidden","aria-labelledby"]),[[U,V(u)]])])),_:3})],2))}}),[["__file","collapse-item.vue"]]);const ve=w(me,{CollapseItem:fe}),be=k(fe),ye=h("span",{style:{"font-size":"12px"}},"自动填充",-1),Ve=h("span",null,"存储: ",-1),Be={style:{"font-weight":"bold"}},ge={style:{float:"left"}},_e={style:{float:"right","margin-left":"5px",color:"var(--el-text-color-secondary)","font-size":"13px"}},he=h("span",null,"展示: ",-1),Ce={style:{"font-weight":"bold"}},Ee={style:{float:"left"}},Ae={style:{float:"right","margin-left":"5px",color:"var(--el-text-color-secondary)","font-size":"13px"}},Ne={key:0},xe=Object.assign({name:"FieldDialog"},{__name:"fieldDialog",props:{dialogMiddle:{type:Object,default:function(){return{}}},typeOptions:{type:Array,default:function(){return[]}},typeSearchOptions:{type:Array,default:function(){return[]}},typeIndexOptions:{type:Array,default:function(){return[]}}},setup(e,{expose:l}){const a=e,o=i([]),t=i({}),u=i([]),d=i({fieldName:[{required:!0,message:"请输入字段英文名",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段中文名",trigger:"blur"}],fieldJson:[{required:!0,message:"请输入字段格式化json",trigger:"blur"}],columnName:[{required:!0,message:"请输入数据库字段",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"blur"}],dataTypeLong:[{validator:(e,l,a)=>{"enum"!=t.value.fieldType||/^('([^']*)'(?:,'([^']+)'*)*)$/.test(l)?a():a(new Error("枚举值校验错误"))},trigger:"blur"}]});(async()=>{t.value=a.dialogMiddle;const e=await Z({page:1,pageSize:999999});u.value=e.data})();const s=()=>{t.value.fieldJson=G(t.value.fieldName),t.value.columnName=R(t.value.fieldJson)},n=e=>{const l=t.value.fieldType;return"string"!==l&&"LIKE"===e||"int"!==l&&"time.Time"!==l&&"float64"!==l&&("BETWEEN"===e||"NOT BETWEEN"===e)},r=()=>{t.value.fieldSearchType="",t.value.dictType=""},m=e=>{2===e&&J.confirm("一对多关联模式下，数据类型会改变为数组，后端表现为json，具体表现为数组模式，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{t.value.fieldType="array"})).catch((()=>{t.value.dataSource.association=1}))},p=i([]),c=async()=>{const e=await X();if(console.log(e),0===e.code){let l=e.data.tables;p.value=l.map((e=>({tableName:e.tableName,value:e.tableName})))}},b=i([]),y=async e=>{t.value.dataSource.table=e;const l=await ee({tableName:e});if(console.log(l),0===l.code){let e=l.data.columns;b.value=e.map((e=>({columnName:e.columnName,value:e.columnName,type:e.dataType,isPrimary:e.primaryKey,comment:e.columnComment}))),b.value.length>0&&(t.value.dataSource.label=b.value[0].columnName,t.value.dataSource.value=b.value[0].columnName)}},V=i(null);return l({fieldDialogForm:V}),(l,a)=>{const i=L,B=z,g=$,_=le,x=ae,D=Y,j=M,T=W,S=H,U=oe,w=K("block"),k=P,J=be,G=ve;return f(),v("div",null,[A(Q,{title:"id , created_at , updated_at , deleted_at 会自动生成请勿重复创建。搜索时如果条件为LIKE只支持字符串"}),A(T,{ref_key:"fieldDialogForm",ref:V,model:t.value,"label-width":"120px","label-position":"right",rules:d.value,class:"grid grid-cols-2"},{default:N((()=>[A(g,{label:"字段名称",prop:"fieldName"},{default:N((()=>[A(i,{modelValue:t.value.fieldName,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value.fieldName=e),autocomplete:"off",style:{width:"80%"}},null,8,["modelValue"]),A(B,{style:{width:"18%","margin-left":"2%"},onClick:s},{default:N((()=>[ye])),_:1})])),_:1}),A(g,{label:"字段中文名",prop:"fieldDesc"},{default:N((()=>[A(i,{modelValue:t.value.fieldDesc,"onUpdate:modelValue":a[1]||(a[1]=e=>t.value.fieldDesc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),A(g,{label:"字段JSON",prop:"fieldJson"},{default:N((()=>[A(i,{modelValue:t.value.fieldJson,"onUpdate:modelValue":a[2]||(a[2]=e=>t.value.fieldJson=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),A(g,{label:"数据库字段名",prop:"columnName"},{default:N((()=>[A(i,{modelValue:t.value.columnName,"onUpdate:modelValue":a[3]||(a[3]=e=>t.value.columnName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),A(g,{label:"数据库字段描述",prop:"comment"},{default:N((()=>[A(i,{modelValue:t.value.comment,"onUpdate:modelValue":a[4]||(a[4]=e=>t.value.comment=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),A(g,{label:"字段类型",prop:"fieldType"},{default:N((()=>[A(x,{modelValue:t.value.fieldType,"onUpdate:modelValue":a[5]||(a[5]=e=>t.value.fieldType=e),style:{width:"100%"},placeholder:"请选择字段类型",clearable:"",onChange:r},{default:N((()=>[(f(!0),v(I,null,O(e.typeOptions,(e=>(f(),q(_,{key:e.value,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),A(g,{label:"enum"===t.value.fieldType?"枚举值":"类型长度",prop:"dataTypeLong"},{default:N((()=>[A(i,{modelValue:t.value.dataTypeLong,"onUpdate:modelValue":a[6]||(a[6]=e=>t.value.dataTypeLong=e),placeholder:"enum"===t.value.fieldType?"例:'北京','天津'":"数据库类型长度"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),A(g,{label:"字段查询条件",prop:"fieldSearchType"},{default:N((()=>[A(x,{modelValue:t.value.fieldSearchType,"onUpdate:modelValue":a[7]||(a[7]=e=>t.value.fieldSearchType=e),disabled:"json"===t.value.fieldType,style:{width:"100%"},placeholder:"请选择字段查询条件",clearable:""},{default:N((()=>[(f(!0),v(I,null,O(e.typeSearchOptions,(e=>(f(),q(_,{key:e.value,label:e.label,value:e.value,disabled:n(e.value)},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),A(g,{label:"关联字典",prop:"dictType"},{default:N((()=>[A(x,{modelValue:t.value.dictType,"onUpdate:modelValue":a[8]||(a[8]=e=>t.value.dictType=e),style:{width:"100%"},disabled:"string"!==t.value.fieldType,placeholder:"请选择字典",clearable:""},{default:N((()=>[(f(!0),v(I,null,O(u.value,(e=>(f(),q(_,{key:e.type,label:"".concat(e.type,"(").concat(e.name,")"),value:e.type},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),A(g,{label:"默认值"},{default:N((()=>[A(i,{modelValue:t.value.defaultValue,"onUpdate:modelValue":a[9]||(a[9]=e=>t.value.defaultValue=e),placeholder:"请输入默认值"},null,8,["modelValue"])])),_:1}),A(g,{label:"主键"},{default:N((()=>[A(D,{modelValue:t.value.primaryKey,"onUpdate:modelValue":a[10]||(a[10]=e=>t.value.primaryKey=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"索引类型",prop:"fieldIndexType"},{default:N((()=>[A(x,{modelValue:t.value.fieldIndexType,"onUpdate:modelValue":a[11]||(a[11]=e=>t.value.fieldIndexType=e),disabled:"json"===t.value.fieldType,style:{width:"100%"},placeholder:"请选择字段索引类型",clearable:""},{default:N((()=>[(f(!0),v(I,null,O(e.typeIndexOptions,(e=>(f(),q(_,{key:e.value,label:e.label,value:e.value,disabled:n(e.value)},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),A(g,{label:"前端新建/编辑"},{default:N((()=>[A(j,{modelValue:t.value.form,"onUpdate:modelValue":a[12]||(a[12]=e=>t.value.form=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"前端表格列"},{default:N((()=>[A(j,{modelValue:t.value.table,"onUpdate:modelValue":a[13]||(a[13]=e=>t.value.table=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"前端详情"},{default:N((()=>[A(j,{modelValue:t.value.desc,"onUpdate:modelValue":a[14]||(a[14]=e=>t.value.desc=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"导入/导出"},{default:N((()=>[A(j,{modelValue:t.value.excel,"onUpdate:modelValue":a[15]||(a[15]=e=>t.value.excel=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"是否排序"},{default:N((()=>[A(j,{modelValue:t.value.sort,"onUpdate:modelValue":a[16]||(a[16]=e=>t.value.sort=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"是否必填"},{default:N((()=>[A(j,{modelValue:t.value.require,"onUpdate:modelValue":a[17]||(a[17]=e=>t.value.require=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"是否可清空"},{default:N((()=>[A(j,{modelValue:t.value.clearable,"onUpdate:modelValue":a[18]||(a[18]=e=>t.value.clearable=e)},null,8,["modelValue"])])),_:1}),A(g,{label:"隐藏查询条件"},{default:N((()=>[A(j,{modelValue:t.value.fieldSearchHide,"onUpdate:modelValue":a[19]||(a[19]=e=>t.value.fieldSearchHide=e),disabled:!t.value.fieldSearchType},null,8,["modelValue","disabled"])])),_:1}),A(g,{label:"校验失败文案"},{default:N((()=>[A(i,{modelValue:t.value.errorText,"onUpdate:modelValue":a[20]||(a[20]=e=>t.value.errorText=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),A(G,{modelValue:o.value,"onUpdate:modelValue":a[25]||(a[25]=e=>o.value=e)},{default:N((()=>[A(J,{title:"数据源配置（此配置为高级配置，如编程基础不牢，可能导致自动化代码不可用）",name:"1"},{default:N((()=>[A(k,{gutter:8},{default:N((()=>[A(S,{span:3},{default:N((()=>[A(x,{modelValue:t.value.dataSource.association,"onUpdate:modelValue":a[21]||(a[21]=e=>t.value.dataSource.association=e),placeholder:"关联模式",onChange:m},{default:N((()=>[A(_,{label:"一对一",value:1}),A(_,{label:"一对多",value:2})])),_:1},8,["modelValue"])])),_:1}),A(S,{span:7},{default:N((()=>[A(x,{modelValue:t.value.dataSource.table,"onUpdate:modelValue":a[22]||(a[22]=e=>t.value.dataSource.table=e),placeholder:"请选择数据源表",filterable:"","allow-create":"",onFocus:c,onChange:y},{default:N((()=>[(f(!0),v(I,null,O(p.value,(e=>(f(),q(_,{key:e.tableName,label:e.tableName,value:e.tableName},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),A(S,{span:7},{default:N((()=>[A(x,{modelValue:t.value.dataSource.value,"onUpdate:modelValue":a[23]||(a[23]=e=>t.value.dataSource.value=e),placeholder:"请先选择需要存储的数据"},{label:N((({value:e})=>[Ve,h("span",Be,E(e),1)])),default:N((()=>[(f(!0),v(I,null,O(b.value,(e=>(f(),q(_,{key:e.columnName,value:e.columnName},{default:N((()=>[h("span",ge,[A(U,{type:e.isPrimary?"primary":"info"},{default:N((()=>[C(E(e.isPrimary?"主 键":"非主键"),1)])),_:2},1032,["type"]),C(" "+E(e.columnName),1)]),h("span",_e,[C(" 类型："+E(e.type)+" ",1),""!=e.comment?(f(),q(w,{key:0},{default:N((()=>[C("，字段说明："+E(e.comment),1)])),_:2},1024)):F("",!0)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1}),A(S,{span:7},{default:N((()=>[A(x,{modelValue:t.value.dataSource.label,"onUpdate:modelValue":a[24]||(a[24]=e=>t.value.dataSource.label=e),placeholder:"请先选择需要展示的数据"},{label:N((({value:e})=>[he,h("span",Ce,E(e),1)])),default:N((()=>[(f(!0),v(I,null,O(b.value,(e=>(f(),q(_,{key:e.columnName,value:e.columnName},{default:N((()=>[h("span",Ee,[A(U,{type:e.isPrimary?"primary":"info"},{default:N((()=>[C(E(e.isPrimary?"主 键":"非主键"),1)])),_:2},1032,["type"]),C(" "+E(e.columnName),1)]),h("span",Ae,[C(" 类型："+E(e.type)+" ",1),""!=e.comment?(f(),v("span",Ne,"，字段说明："+E(e.comment),1)):F("",!0)])])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{xe as default};
