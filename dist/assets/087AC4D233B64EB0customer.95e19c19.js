/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{v as e,a,o as t,c as l,d as o,b as s,w as r,g as i,t as u,G as m,at as n,au as p,j as d,E as c,l as B}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                */import{a as v,E as C}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                              *//* empty css                                   *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               */import{E as D,a as f}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                *//* empty css                               */import{_ as j}from"./087AC4D233B64EB0warningBar.fba111b1.js";import{E}from"./087AC4D233B64EB0index.7d3772ac.js";import{E as A}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0index.46727ea4.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const g=a=>e({url:"/customer/customer",method:"post",data:a}),h={class:"gva-table-box"},b={class:"gva-btn-list"},w={class:"gva-pagination"},y={class:"flex justify-between items-center"},x=s("span",{class:"text-lg"},"客户",-1),_=Object.assign({name:"Customer"},{__name:"customer",setup(_){const k=a({customerName:"",customerPhoneData:""}),V=a(1),z=a(0),I=a(10),P=a([]),U=e=>{I.value=e,S()},N=e=>{V.value=e,S()},S=async()=>{const a=await(t={page:V.value,pageSize:I.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(P.value=a.data.list,z.value=a.data.total,V.value=a.data.page,I.value=a.data.pageSize)};S();const T=a(!1),q=a(""),L=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;q.value="update",0===t.code&&(k.value=t.data.customer,T.value=!0)},O=()=>{T.value=!1,k.value={customerName:"",customerPhoneData:""}},G=async a=>{p.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(d({type:"success",message:"删除成功"}),1===P.value.length&&V.value>1&&V.value--,S())}))},K=async()=>{let a;switch(q.value){case"create":default:a=await g(k.value);break;case"update":a=await(t=k.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(O(),S())},M=()=>{q.value="create",T.value=!0};return(e,a)=>{const p=c,d=D,g=f,_=E,S=B,q=v,Q=C,R=A;return t(),l("div",null,[o(j,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",h,[s("div",b,[o(p,{type:"primary",icon:"plus",onClick:M},{default:r((()=>[i("新增")])),_:1})]),o(g,{ref:"multipleTable",data:P.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(d,{type:"selection",width:"55"}),o(d,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,u(m(n)(e.row.CreatedAt)),1)])),_:1}),o(d,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(d,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(d,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(d,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(p,{type:"primary",link:"",icon:"edit",onClick:a=>L(e.row)},{default:r((()=>[i("变更")])),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",icon:"delete",onClick:a=>G(e.row)},{default:r((()=>[i("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",w,[o(_,{"current-page":V.value,"page-size":I.value,"page-sizes":[10,30,50,100],total:z.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:U},null,8,["current-page","page-size","total"])])]),o(R,{modelValue:T.value,"onUpdate:modelValue":a[2]||(a[2]=e=>T.value=e),"before-close":O,"show-close":!1},{header:r((()=>[s("div",y,[x,s("div",null,[o(p,{onClick:O},{default:r((()=>[i("取 消")])),_:1}),o(p,{type:"primary",onClick:K},{default:r((()=>[i("确 定")])),_:1})])])])),default:r((()=>[o(Q,{inline:!0,model:k.value,"label-width":"80px"},{default:r((()=>[o(q,{label:"客户名"},{default:r((()=>[o(S,{modelValue:k.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>k.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(q,{label:"客户电话"},{default:r((()=>[o(S,{modelValue:k.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>k.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{_ as default};
