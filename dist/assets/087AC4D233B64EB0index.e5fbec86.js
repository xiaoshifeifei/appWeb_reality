/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{_ as e,u as a,a as l,o as t,c as o,b as s,d as i,w as u,g as d,t as r,h as n,e as p,j as m,au as c,l as v,E as f,p as B,i as g}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                */import{d as C,E as y}from"./087AC4D233B64EB0date-picker.a2585bf6.js";/* empty css                              *//* empty css                                  *//* empty css                               *//* empty css                               */import{E,a as b}from"./087AC4D233B64EB0col.8e8483c8.js";import{E as j}from"./087AC4D233B64EB0input-number.525084f9.js";/* empty css                                   *//* empty css                            *//* empty css                               */import{E as _,a as D}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                */import{E as A}from"./087AC4D233B64EB0switch.4d3b2bd4.js";import{a as h,E as w}from"./087AC4D233B64EB0form-item.cbb99123.js";import{m as x,i as V,j as k,k as U}from"./087AC4D233B64EB0tack.f6fb0d39.js";import{E as z}from"./087AC4D233B64EB0index.7d3772ac.js";import{E as S}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0arrays.2c626d3b.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0index.9bcf7e3e.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0index.46727ea4.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const q={class:"gva-search-box"},O={class:"gva-table-box"},F={class:"gva-btn-list"},J={class:"gva-pagination"},N={class:"flex justify-between items-center"},T={class:"text-lg"},Y=(e=>(B("data-v-ccc4504a"),e=e(),g(),e))((()=>s("div",{style:{padding:"0 0 20px 40px",color:"black","font-size":"16px"}}," 项目 ",-1))),I=e(Object.assign({name:"goodsConfiguration"},{__name:"index",setup(e){a();const B=l([]),g=l({id:null,items:[{code:"",num:null}],type:null,status:null,price:"",discount:"",expired:""}),I=l(""),M=l({id:[{required:!0,message:"请输入id",trigger:"blur"}],type:[{required:!0,message:"请输入type",trigger:"blur"}],desc:[{required:!0,message:"请输入desc",trigger:"blur"}],expired:[{required:!0,message:"请选择过期时间",trigger:"blur"}]}),H=l(1),K=l(0),L=l(10),P=l([]),Q=l({}),R=()=>{Q.value={}},Z=()=>{H.value=1,L.value=10,X()},G=e=>{L.value=e,X()},W=e=>{H.value=e,X()},X=async()=>{const e=await x({page:H.value,pageSize:L.value,...Q.value});0===e.code&&(P.value=e.data.list,K.value=e.data.total,H.value=e.data.page,L.value=e.data.pageSize)};X();const $=e=>{B.value=e},ee=l(null),ae=()=>{if(g.value.expired){const e=C(g.value.expired).format("YYYY-MM-DDTHH:mm:ssZ");g.value.expired=e}},le=l("新增"),te=l(!1),oe=e=>{switch(e){case"add":le.value="新增";break;case"edit":le.value="编辑"}I.value=e,te.value=!0},se=()=>{ee.value.resetFields(),g.value={id:null,items:[{code:"",num:null}],type:null,status:null,price:"",discount:"",expired:""},te.value=!1},ie=async()=>{ee.value.validate((async e=>{if(e)switch(I.value){case"add":0===(await k(g.value)).code&&m({type:"success",message:"添加成功",showClose:!0}),X(),se();break;case"edit":0===(await V(g.value)).code&&m({type:"success",message:"编辑成功",showClose:!0}),X(),se();break;default:m({type:"error",message:"未知操作",showClose:!0})}}))};return(e,a)=>{const l=v,B=h,C=f,x=w,k=_,ue=A,de=D,re=z,ne=j,pe=E,me=b,ce=y,ve=S;return t(),o("div",null,[s("div",q,[i(x,{ref:"searchForm",inline:!0,model:Q.value},{default:u((()=>[i(B,{label:"key"},{default:u((()=>[i(l,{modelValue:Q.value.key,"onUpdate:modelValue":a[0]||(a[0]=e=>Q.value.key=e),placeholder:"key"},null,8,["modelValue"])])),_:1}),i(B,null,{default:u((()=>[i(C,{type:"primary",icon:"search",onClick:Z},{default:u((()=>[d(" 查询 ")])),_:1}),i(C,{icon:"refresh",onClick:R},{default:u((()=>[d(" 重置 ")])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",O,[s("div",F,[i(C,{type:"primary",icon:"plus",onClick:a[1]||(a[1]=e=>oe("add"))},{default:u((()=>[d(" 新增 ")])),_:1})]),i(de,{border:"",data:P.value,onSortChange:e.sortChange,onSelectionChange:$},{default:u((()=>[i(k,{type:"selection",width:"60"}),i(k,{align:"center",label:"id","min-width":"150",prop:"id"}),i(k,{align:"center",label:"类型","min-width":"150",prop:"type"}),i(k,{align:"center",label:"项目","min-width":"150",prop:"items"},{default:u((e=>[s("div",null,r(e.row.items),1)])),_:1}),i(k,{align:"center",label:"价格","min-width":"150",prop:"price"}),i(k,{align:"center",label:"折扣","min-width":"150",prop:"discount"}),i(k,{align:"center",label:"过期时间","min-width":"150",prop:"expired"}),i(k,{align:"center",label:"创建时间","min-width":"150",prop:"created"}),i(k,{align:"center",label:"启用","min-width":"150"},{default:u((e=>[i(ue,{modelValue:e.row.status,"onUpdate:modelValue":a=>e.row.status=a,"inline-prompt":"","active-value":0,"inactive-value":1,onChange:()=>{(async e=>{let a=JSON.parse(JSON.stringify(e));0===(await V(a)).code&&m({type:"success",message:"".concat(0===a.status?"启用":"禁用","成功")})})(e.row)}},null,8,["modelValue","onUpdate:modelValue","onChange"])])),_:1}),i(k,{align:"center",fixed:"right",label:"操作",width:"200"},{default:u((e=>[i(C,{icon:"edit",type:"primary",link:"",onClick:a=>(async e=>{let a=JSON.parse(JSON.stringify(e));g.value=a,oe("edit")})(e.row)},{default:u((()=>[d(" 编辑 ")])),_:2},1032,["onClick"]),i(C,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{c.confirm("此操作将永久删除任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await U({id:e.id})).code&&(m({type:"success",message:"删除成功!"}),X())}))})(e.row)},{default:u((()=>[d(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSortChange"]),s("div",J,[i(re,{"current-page":H.value,"page-size":L.value,"page-sizes":[10,30,50,100],total:K.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:W,onSizeChange:G},null,8,["current-page","page-size","total"])])]),te.value?(t(),n(ve,{key:0,modelValue:te.value,"onUpdate:modelValue":a[10]||(a[10]=e=>te.value=e),size:"60%","before-close":se,"show-close":!1},{header:u((()=>[s("div",N,[s("span",T,r(le.value),1),s("div",null,[i(C,{onClick:se},{default:u((()=>[d(" 取 消 ")])),_:1}),i(C,{type:"primary",onClick:ie},{default:u((()=>[d(" 确 定 ")])),_:1})])])])),default:u((()=>[i(x,{class:"myForm",ref_key:"apiForm",ref:ee,model:g.value,rules:M.value,"label-width":"80px"},{default:u((()=>[i(me,{class:"w-full"},{default:u((()=>[i(pe,{span:12},{default:u((()=>[i(B,{label:"ID",prop:"id"},{default:u((()=>[i(ne,{min:0,modelValue:g.value.id,"onUpdate:modelValue":a[2]||(a[2]=e=>g.value.id=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),Y,i(me,{class:"w-full"},{default:u((()=>[g.value.items[0].code||"add"===I.value?(t(),n(pe,{key:0,span:12},{default:u((()=>[i(B,{label:"code",prop:"code"},{default:u((()=>[i(l,{modelValue:g.value.items[0].code,"onUpdate:modelValue":a[3]||(a[3]=e=>g.value.items[0].code=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})):p("",!0),g.value.items[0].num||"add"===I.value?(t(),n(pe,{key:1,span:12},{default:u((()=>[i(B,{label:"num",prop:"num"},{default:u((()=>[i(ne,{min:0,modelValue:g.value.items[0].num,"onUpdate:modelValue":a[4]||(a[4]=e=>g.value.items[0].num=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})):p("",!0)])),_:1}),i(me,{class:"w-full"},{default:u((()=>[i(pe,{span:12},{default:u((()=>[i(B,{label:"类型",prop:"type"},{default:u((()=>[i(ne,{min:0,modelValue:g.value.type,"onUpdate:modelValue":a[5]||(a[5]=e=>g.value.type=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(B,{label:"启用",prop:"status"},{default:u((()=>[i(ue,{modelValue:g.value.status,"onUpdate:modelValue":a[6]||(a[6]=e=>g.value.status=e),"inline-prompt":"","active-value":0,"inactive-value":1},null,8,["modelValue"])])),_:1}),i(me,{class:"w-full"},{default:u((()=>[i(pe,{span:12},{default:u((()=>[i(B,{label:"价格",prop:"price"},{default:u((()=>[i(l,{type:"number",modelValue:g.value.price,"onUpdate:modelValue":a[7]||(a[7]=e=>g.value.price=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(me,{class:"w-full"},{default:u((()=>[i(pe,{span:12},{default:u((()=>[i(B,{label:"折扣",prop:"discount"},{default:u((()=>[i(l,{type:"number",modelValue:g.value.discount,"onUpdate:modelValue":a[8]||(a[8]=e=>g.value.discount=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1}),i(B,{label:"过期时间",prop:"expired"},{default:u((()=>[i(ce,{modelValue:g.value.expired,"onUpdate:modelValue":a[9]||(a[9]=e=>g.value.expired=e),type:"datetime",placeholder:"请选择过期时间",onChange:ae},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])):p("",!0)])}}}),[["__scopeId","data-v-ccc4504a"]]);export{I as default};
