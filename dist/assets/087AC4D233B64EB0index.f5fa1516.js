/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{C as e,dP as a,D as l,dB as t,x as o,a1 as i,y as n,a as u,F as s,aJ as d,o as r,h as p,w as c,b as m,n as f,G as v,J as B,H as b,I as C,e as g,g as y,t as h,B as E,d as A,E as k,bn as D,K as _,L as V,u as j,c as x,at as w,O as T,P as N,j as U,au as P,l as S}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                *//* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               *//* empty css                              */import{E as z}from"./087AC4D233B64EB0dialog.04c6d5cf.js";/* empty css                                *//* empty css                               */import{a as I,E as M}from"./087AC4D233B64EB0form-item.cbb99123.js";import{E as O}from"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                   */import{E as $,a as q}from"./087AC4D233B64EB0table-column.87522e19.js";/* empty css                                */import{f as J,h as L,i as F,r as G}from"./087AC4D233B64EB0autoCode.8131c587.js";import{b as K}from"./087AC4D233B64EB0stringFun.647a78e9.js";import{E as R}from"./087AC4D233B64EB0index.25218fc3.js";import{E as H}from"./087AC4D233B64EB0index.7d3772ac.js";import{u as Q,E as W}from"./087AC4D233B64EB0index.c39333f3.js";import{E as X,a as Y}from"./087AC4D233B64EB0index.46727ea4.js";import{E as Z}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";const ee=e({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:a,default:"primary"},cancelButtonType:{type:String,values:a,default:"text"},icon:{type:l,default:()=>t},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Q.teleported,persistent:Q.persistent,width:{type:[String,Number],default:150}}),ae={confirm:e=>e instanceof MouseEvent,cancel:e=>e instanceof MouseEvent},le=o({name:"ElPopconfirm"});const te=V(_(o({...le,props:ee,emits:ae,setup(e,{emit:a}){const l=e,{t:t}=i(),o=n("popconfirm"),_=u(),V=()=>{var e,a;null==(a=null==(e=_.value)?void 0:e.onClose)||a.call(e)},j=s((()=>({width:d(l.width)}))),x=e=>{a("confirm",e),V()},w=e=>{a("cancel",e),V()},T=s((()=>l.confirmButtonText||t("el.popconfirm.confirmButtonText"))),N=s((()=>l.cancelButtonText||t("el.popconfirm.cancelButtonText")));return(e,a)=>(r(),p(v(W),D({ref_key:"tooltipRef",ref:_,trigger:"click",effect:"light"},e.$attrs,{"popper-class":"".concat(v(o).namespace.value,"-popover"),"popper-style":v(j),teleported:e.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":e.hideAfter,persistent:e.persistent}),{content:c((()=>[m("div",{class:f(v(o).b())},[m("div",{class:f(v(o).e("main"))},[!e.hideIcon&&e.icon?(r(),p(v(B),{key:0,class:f(v(o).e("icon")),style:b({color:e.iconColor})},{default:c((()=>[(r(),p(C(e.icon)))])),_:1},8,["class","style"])):g("v-if",!0),y(" "+h(e.title),1)],2),m("div",{class:f(v(o).e("action"))},[E(e.$slots,"actions",{confirm:x,cancel:w},(()=>[A(v(k),{size:"small",type:"text"===e.cancelButtonType?"":e.cancelButtonType,text:"text"===e.cancelButtonType,onClick:w},{default:c((()=>[y(h(v(N)),1)])),_:1},8,["type","text"]),A(v(k),{size:"small",type:"text"===e.confirmButtonType?"":e.confirmButtonType,text:"text"===e.confirmButtonType,onClick:x},{default:c((()=>[y(h(v(T)),1)])),_:1},8,["type","text"])]))],2)],2)])),default:c((()=>[e.$slots.reference?E(e.$slots,"reference",{key:0}):g("v-if",!0)])),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}}),[["__file","popconfirm.vue"]])),oe={class:"gva-table-box"},ie={class:"gva-btn-list"},ne={class:"gva-pagination"},ue={class:"dialog-footer"},se={class:"flex justify-between items-center"},de=m("span",{class:"text-lg"},"操作栏",-1),re={class:""},pe=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(e){const a=u({id:void 0,deleteApi:!0,deleteMenu:!0,deleteTable:!1}),l=j(),t=u(!1),o=u(""),i=u(1),n=u(0),s=u(10),d=u([]),f=u({package:"",funcName:"",structName:"",packageName:"",description:"",abbreviation:"",humpPackageName:"",businessDB:"",method:""}),B=u(!1),b=()=>{B.value=!1},C=async()=>{f.value.funcName=K(f.value.funcName);0===(await J(f.value)).code&&(U.success("增加方法成功"),b())},g=e=>{s.value=e,D()},E=e=>{i.value=e,D()},D=async()=>{const e=await L({page:i.value,pageSize:s.value});0===e.code&&(d.value=e.data.list,n.value=e.data.total,i.value=e.data.page,s.value=e.data.pageSize)};D();const _=()=>{t.value=!1,a.value={id:void 0,deleteApi:!0,deleteMenu:!0,deleteTable:!1}},V=e=>{e&&P.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{closeOnClickModal:!1,distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{P.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{closeOnClickModal:!1,distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((()=>{a.value.deleteTable=!1}))})).catch((()=>{a.value.deleteTable=!1}))},Q=async()=>{0===(await G(a.value)).code&&(U.success("回滚成功"),D())},W=e=>{e?l.push({name:"autoCodeEdit",params:{id:e.ID}}):l.push({name:"autoCode"})};return(e,l)=>{const u=k,j=$,J=R,L=q,G=H,K=O,ee=I,ae=M,le=te,pe=z,ce=S,me=X,fe=Y,ve=Z;return r(),x("div",null,[m("div",oe,[m("div",ie,[A(u,{type:"primary",icon:"plus",onClick:l[0]||(l[0]=e=>W(null))},{default:c((()=>[y(" 新增 ")])),_:1})]),A(L,{data:d.value},{default:c((()=>[A(j,{type:"selection",width:"55"}),A(j,{align:"left",label:"id",width:"60",prop:"ID"}),A(j,{align:"left",label:"日期",width:"180"},{default:c((e=>[y(h(v(w)(e.row.CreatedAt)),1)])),_:1}),A(j,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),A(j,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),A(j,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),A(j,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:c((e=>[e.row.flag?(r(),p(J,{key:0,type:"danger",effect:"dark"},{default:c((()=>[y(" 已回滚 ")])),_:1})):(r(),p(J,{key:1,type:"success",effect:"dark"},{default:c((()=>[y(" 未回滚 ")])),_:1}))])),_:1}),A(j,{align:"left",label:"操作","min-width":"240"},{default:c((e=>[m("div",null,[A(u,{type:"primary",link:"",disabled:1===e.row.flag,onClick:a=>(e=>{const a=JSON.parse(e.request);f.value.package=a.package,f.value.structName=a.structName,f.value.packageName=a.packageName,f.value.description=a.description,f.value.abbreviation=a.abbreviation,f.value.humpPackageName=a.humpPackageName,f.value.businessDB=a.businessDB,f.value.method="",f.value.funcName="",f.value.router="",B.value=!0})(e.row)},{default:c((()=>[y(" 增加方法 ")])),_:2},1032,["disabled","onClick"]),A(u,{type:"primary",link:"",disabled:1===e.row.flag,onClick:l=>{return i=e.row,o.value="回滚："+i.structName,a.value.id=i.ID,void(t.value=!0);var i}},{default:c((()=>[y(" 回滚 ")])),_:2},1032,["disabled","onClick"]),A(u,{type:"primary",link:"",onClick:a=>W(e.row)},{default:c((()=>[y(" 复用 ")])),_:2},1032,["onClick"]),A(u,{type:"primary",link:"",onClick:a=>(async e=>{P.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await F({id:Number(e.ID)})).code&&(U.success("删除成功"),D())}))})(e.row)},{default:c((()=>[y(" 删除 ")])),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),m("div",ne,[A(G,{"current-page":i.value,"page-size":s.value,"page-sizes":[10,30,50,100],total:n.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:E,onSizeChange:g},null,8,["current-page","page-size","total"])])]),A(pe,{modelValue:t.value,"onUpdate:modelValue":l[4]||(l[4]=e=>t.value=e),title:o.value,"before-close":_,width:"600px"},{footer:c((()=>[m("div",ue,[A(u,{onClick:_},{default:c((()=>[y(" 取 消 ")])),_:1}),A(le,{title:"此操作将回滚生成文件和勾选项目, 是否继续?",onConfirm:Q},{reference:c((()=>[A(u,{type:"primary"},{default:c((()=>[y(" 确 定 ")])),_:1})])),_:1})])])),default:c((()=>[A(ae,{inline:!0,model:a.value,"label-width":"80px"},{default:c((()=>[A(ee,{label:"选项："},{default:c((()=>[A(K,{modelValue:a.value.deleteApi,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value.deleteApi=e),label:"删除接口"},null,8,["modelValue"]),A(K,{modelValue:a.value.deleteMenu,"onUpdate:modelValue":l[2]||(l[2]=e=>a.value.deleteMenu=e),label:"删除菜单"},null,8,["modelValue"]),A(K,{modelValue:a.value.deleteTable,"onUpdate:modelValue":l[3]||(l[3]=e=>a.value.deleteTable=e),label:"删除表",onChange:V},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"]),A(ve,{modelValue:B.value,"onUpdate:modelValue":l[14]||(l[14]=e=>B.value=e),size:"60%","show-close":!1},{header:c((()=>[m("div",se,[de,m("div",null,[A(u,{type:"primary",onClick:C},{default:c((()=>[y(" 生成 ")])),_:1}),A(u,{type:"primary",onClick:b},{default:c((()=>[y(" 取消 ")])),_:1})])])])),default:c((()=>[m("div",re,[A(ae,{"label-position":"top",model:f.value,"label-width":"80px"},{default:c((()=>[A(ee,{label:"包名："},{default:c((()=>[A(ce,{modelValue:f.value.package,"onUpdate:modelValue":l[5]||(l[5]=e=>f.value.package=e),placeholder:"请输入包名",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"结构体名："},{default:c((()=>[A(ce,{modelValue:f.value.structName,"onUpdate:modelValue":l[6]||(l[6]=e=>f.value.structName=e),placeholder:"请输入结构体名",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"前端文件名："},{default:c((()=>[A(ce,{modelValue:f.value.packageName,"onUpdate:modelValue":l[7]||(l[7]=e=>f.value.packageName=e),placeholder:"请输入文件名",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"后端文件名："},{default:c((()=>[A(ce,{modelValue:f.value.humpPackageName,"onUpdate:modelValue":l[8]||(l[8]=e=>f.value.humpPackageName=e),placeholder:"请输入文件名",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"描述："},{default:c((()=>[A(ce,{modelValue:f.value.description,"onUpdate:modelValue":l[9]||(l[9]=e=>f.value.description=e),placeholder:"请输入描述",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"缩写："},{default:c((()=>[A(ce,{modelValue:f.value.abbreviation,"onUpdate:modelValue":l[10]||(l[10]=e=>f.value.abbreviation=e),placeholder:"请输入缩写",disabled:""},null,8,["modelValue"])])),_:1}),A(ee,{label:"方法名："},{default:c((()=>[A(ce,{modelValue:f.value.funcName,"onUpdate:modelValue":l[11]||(l[11]=e=>f.value.funcName=e),placeholder:"请输入方法名"},null,8,["modelValue"])])),_:1}),A(ee,{label:"方法："},{default:c((()=>[A(fe,{modelValue:f.value.method,"onUpdate:modelValue":l[12]||(l[12]=e=>f.value.method=e),placeholder:"请选择方法"},{default:c((()=>[(r(),x(T,null,N(["GET","POST","PUT","DELETE"],(e=>A(me,{key:e,label:e,value:e},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),A(ee,{label:"路由path:"},{default:c((()=>[A(ce,{modelValue:f.value.router,"onUpdate:modelValue":l[13]||(l[13]=e=>f.value.router=e),placeholder:"路由path"},null,8,["modelValue"]),m("div",null,"API路径: ["+h(f.value.method)+"] /"+h(f.value.abbreviation)+"/"+h(f.value.router),1)])),_:1})])),_:1},8,["model"])])])),_:1},8,["modelValue"])])}}});export{pe as default};
