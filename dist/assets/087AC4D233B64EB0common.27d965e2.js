/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{v as e,_ as a,o as s,c as o,d as t,w as l,g as r,G as i,cE as n,j as p,E as d,a as u}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                 *//* empty css                               */import{I as c,i as m,a as f}from"./087AC4D233B64EB0image.381f4010.js";/* empty css                                                                              */import{E as g}from"./087AC4D233B64EB0index.e10cda1e.js";const _=a=>e({url:"/fileUploadAndDownload/getFileList",method:"post",data:a}),B=a=>e({url:"/fileUploadAndDownload/deleteFile",method:"post",data:a}),b=a=>e({url:"/fileUploadAndDownload/editFileName",method:"post",data:a}),j=a(Object.assign({name:"UploadImage"},{__name:"image",props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},emits:["on-success"],setup(e,{emit:a}){const u=a,m=e,f=e=>{const a="image/jpeg"===e.type,s="image/png"===e.type;if(!a&&!s)return p.error("上传头像图片只能是 jpg或png 格式!"),!1;const o=e.size/1024<m.fileSize;if(!o){return new c(e,m.fileSize,m.maxWH).compress()}return o},_=e=>{const{data:a}=e;a.file&&u("on-success",a.file.url)};return(e,a)=>{const p=d,u=g;return s(),o("div",null,[t(u,{action:"".concat(i(n)(),"/fileUploadAndDownload/upload"),"show-file-list":!1,"on-success":_,"before-upload":f,multiple:!1},{default:l((()=>[t(p,{type:"primary"},{default:l((()=>[r("压缩上传")])),_:1})])),_:1},8,["action"])])}}}),[["__scopeId","data-v-2dbbcee1"]]),y=Object.assign({name:"UploadCommon"},{__name:"common",emits:["on-success"],setup(e,{emit:a}){const c=a;u("/api");const _=u(!1),B=e=>{_.value=!0;const a=e.size/1024/1024<.5,s=e.size/1024/1024<5,o=m(e.type),t=f(e.type);let l=!0;return o||t||(p.error("上传图片只能是 jpg,png,svg,webp 格式, 上传视频只能是 mp4,webm 格式!"),_.value=!1,l=!1),!s&&o&&(p.error("上传视频大小不能超过 5MB"),_.value=!1,l=!1),!a&&t&&(p.error("未压缩的上传图片大小不能超过 500KB，请使用压缩上传"),_.value=!1,l=!1),console.log("upload file check result: ",l),l},b=e=>{const{data:a}=e;a.file&&c("on-success",a.file.url)},j=()=>{p({type:"error",message:"上传失败"}),_.value=!1};return(e,a)=>{const p=d,u=g;return s(),o("div",null,[t(u,{action:"".concat(i(n)(),"/fileUploadAndDownload/upload"),"before-upload":B,"on-error":j,"on-success":b,"show-file-list":!1,class:"upload-btn"},{default:l((()=>[t(p,{type:"primary"},{default:l((()=>[r("普通上传")])),_:1})])),_:1},8,["action"])])}}});export{j as U,y as _,B as d,b as e,_ as g};
