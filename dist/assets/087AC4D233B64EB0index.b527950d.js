/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{C as e,ab as t,x as n,F as o,U as a,a as r,V as i,T as s,X as l,b8 as u,o as c,c as m,B as d,H as p,K as B,L as v,ae as f,bd as g,af as A,r as x,ah as E,u as h,cP as b,av as j,cV as C,m as D,aj as y,ad as w,G as k,h as _,e as M,d as I,b as L,n as z,w as S,a6 as N,aw as T,I as P}from"./087AC4D233B64EB0index.70d09b05.js";import R from"./087AC4D233B64EB0index.99a18244.js";import F from"./087AC4D233B64EB0index.2c948117.js";import{u as O}from"./087AC4D233B64EB0index.ac9ce887.js";import W from"./087AC4D233B64EB0index.16d51714.js";import{_ as G}from"./087AC4D233B64EB0bottomInfo.ed3f5347.js";import"./087AC4D233B64EB0normalMode.58bf9ee6.js";/* empty css                                  *//* empty css                             *//* empty css                                *//* empty css                               */import"./087AC4D233B64EB0index.e97033a9.js";import"./087AC4D233B64EB0menuItem.2a994fe1.js";import"./087AC4D233B64EB0index.3f0c929c.js";import"./087AC4D233B64EB0index.8862a37e.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0asyncSubmenu.766249ce.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0headMode.51a1bcb7.js";import"./087AC4D233B64EB0combinationMode.37edcc85.js";/* empty css                               */import"./087AC4D233B64EB0tools.e32c22c5.js";import"./087AC4D233B64EB0index.3bbfd951.js";/* empty css                               *//* empty css                                *//* empty css                            *//* empty css                              */import"./087AC4D233B64EB0input-number.525084f9.js";import"./087AC4D233B64EB0index.9bcf7e3e.js";import"./087AC4D233B64EB0switch.4d3b2bd4.js";import"./087AC4D233B64EB0position.3aaa8bf0.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";import"./087AC4D233B64EB0dialog.04c6d5cf.js";import"./087AC4D233B64EB0doc.46160848.js";import"./087AC4D233B64EB0dropdown.a1b79710.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0index.ffca45ba.js";/* empty css                                     *//* empty css                                                                              */import"./087AC4D233B64EB0index.445cc723.js";import"./087AC4D233B64EB0tab-pane.b806a7d2.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0index.37b5a0cb.js";const H=e({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:t([String,Array]),default:"Element Plus"},font:{type:t(Object)},gap:{type:t(Array),default:()=>[100,100]},offset:{type:t(Array)}});function U(e,t,n=1){const o=document.createElement("canvas"),a=o.getContext("2d"),r=e*n,i=t*n;return o.setAttribute("width","".concat(r,"px")),o.setAttribute("height","".concat(i,"px")),a.save(),[a,o,r,i]}function V(){return function(e,t,n,o,a,r,i,s){const[l,u,c,m]=U(o,a,n);if(e instanceof HTMLImageElement)l.drawImage(e,0,0,c,m);else{const{color:t,fontSize:o,fontStyle:i,fontWeight:s,fontFamily:u,textAlign:m,textBaseline:d}=r,p=Number(o)*n;l.font="".concat(i," normal ").concat(s," ").concat(p,"px/").concat(a,"px ").concat(u),l.fillStyle=t,l.textAlign=m,l.textBaseline=d;const B=Array.isArray(e)?e:[e];null==B||B.forEach(((e,t)=>{l.fillText(null!=e?e:"",c/2,t*(p+3*n))}))}const d=Math.PI/180*Number(t),p=Math.max(o,a),[B,v,f]=U(p,p,n);B.translate(f/2,f/2),B.rotate(d),c>0&&m>0&&B.drawImage(u,-c/2,-m/2);let g=0,A=0,x=0,E=0;const h=c/2,b=m/2;[[0-h,0-b],[0+h,0-b],[0+h,0+b],[0-h,0+b]].forEach((([e,t])=>{const[n,o]=function(e,t){return[e*Math.cos(d)-t*Math.sin(d),e*Math.sin(d)+t*Math.cos(d)]}(e,t);g=Math.min(g,n),A=Math.max(A,n),x=Math.min(x,o),E=Math.max(E,o)}));const j=g+f/2,C=x+f/2,D=A-g,y=E-x,w=i*n,k=s*n,_=2*(D+w),M=y+k,[I,L]=U(_,M);function z(e=0,t=0){I.drawImage(v,j,C,D,y,e,t,D,y)}return z(),z(D+w,-y/2-k/2),z(D+w,+y/2+k/2),[L.toDataURL(),_/n,M/n]}}const q=n({name:"ElWatermark"});const X=v(B(n({...q,props:H,setup(e){const t=e,n={position:"relative"},B=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.color)?n:"rgba(0,0,0,.15)"})),v=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontSize)?n:16})),f=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontWeight)?n:"normal"})),g=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontStyle)?n:"normal"})),A=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontFamily)?n:"sans-serif"})),x=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textAlign)?n:"center"})),E=o((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textBaseline)?n:"hanging"})),h=o((()=>t.gap[0])),b=o((()=>t.gap[1])),j=o((()=>h.value/2)),C=o((()=>b.value/2)),D=o((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[0])?n:j.value})),y=o((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[1])?n:C.value})),w=()=>{const e={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let n=D.value-j.value,o=y.value-C.value;return n>0&&(e.left="".concat(n,"px"),e.width="calc(100% - ".concat(n,"px)"),n=0),o>0&&(e.top="".concat(o,"px"),e.height="calc(100% - ".concat(o,"px)"),o=0),e.backgroundPosition="".concat(n,"px ").concat(o,"px"),e},k=a(null),_=a(),M=r(!1),I=()=>{_.value&&(_.value.remove(),_.value=void 0)},L=(e,t)=>{var n;k.value&&_.value&&(M.value=!0,_.value.setAttribute("style",function(e){return Object.keys(e).map((t=>"".concat(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(t),": ").concat(e[t],";"))).join(" ")}({...w(),backgroundImage:"url('".concat(e,"')"),backgroundSize:"".concat(Math.floor(t),"px")})),null==(n=k.value)||n.append(_.value),setTimeout((()=>{M.value=!1})))},z=V(),S=()=>{const e=document.createElement("canvas").getContext("2d"),n=t.image,o=t.content,a=t.rotate;if(e){_.value||(_.value=document.createElement("div"));const r=window.devicePixelRatio||1,[i,s]=(e=>{let n=120,o=64;const a=t.image,r=t.content,i=t.width,s=t.height;if(!a&&e.measureText){e.font="".concat(Number(v.value),"px ").concat(A.value);const t=Array.isArray(r)?r:[r],a=t.map((t=>{const n=e.measureText(t);return[n.width,void 0!==n.fontBoundingBoxAscent?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...a.map((e=>e[0])))),o=Math.ceil(Math.max(...a.map((e=>e[1]))))*t.length+3*(t.length-1)}return[null!=i?i:n,null!=s?s:o]})(e),l=e=>{const[t,n]=z(e||"",a,r,i,s,{color:B.value,fontSize:v.value,fontStyle:g.value,fontWeight:f.value,fontFamily:A.value,textAlign:x.value,textBaseline:E.value},h.value,b.value);L(t,n)};if(n){const e=new Image;e.onload=()=>{l(e)},e.onerror=()=>{l(o)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=n}else l(o)}};i((()=>{S()})),s((()=>t),(()=>{S()}),{deep:!0,flush:"post"}),l((()=>{I()}));return u(k,(e=>{M.value||e.forEach((e=>{((e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),"attributes"===e.type&&e.target===t&&(n=!0),n})(e,_.value)&&(I(),S())}))}),{attributes:!0,subtree:!0,childList:!0}),(e,t)=>(c(),m("div",{ref_key:"containerRef",ref:k,style:p([n])},[d(e.$slots,"default")],4))}}),[["__file","watermark.vue"]]));const $=992;function J(e){const t=f();const n=O((function(){if(!document.hidden){const e=document.body.getBoundingClientRect().width-1<$;t.toggleDevice(e?"mobile":"desktop")}}),100);i((()=>{e&&n()})),g((()=>{!function(e,t,n,o=!1){e.addEventListener&&"function"==typeof e.addEventListener&&e.addEventListener(t,n,o)}(window,"resize",n)})),l((()=>{!function(e,t,n,o=!1){e.removeEventListener&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n,o)}(window,"resize",n)}))}const K={class:"bg-gray-50 text-slate-700 dark:text-slate-500 dark:bg-slate-800 w-screen h-screen"},Q={class:"flex flex-row w-full gva-container pt-16 box-border h-full"},Z={class:"flex-1 p-2 w-0 h-full"},Y={id:"gva-base-load-dom",class:"gva-body-h bg-gray-50 dark:bg-slate-800"},ee=Object.assign({name:"GvaLayout"},{__name:"index",setup(e){const t=f(),{config:n,theme:o,device:a}=A(t);J(!0);const s=x({color:"rgba(0, 0, 0, .15)"});E((()=>{s.color="dark"===o.value?"rgba(255,255,255, .15)":"rgba(0, 0, 0, .15)"}));const l=h(),u=b(),d=j();i((()=>{C.on("reload",g),p.loadingInstance&&p.loadingInstance.close()}));const p=D(),B=r(!0);let v=null;const g=async()=>{v&&window.clearTimeout(v),v=window.setTimeout((async()=>{if(u.meta.keepAlive)B.value=!1,await y(),B.value=!0;else{const e=u.meta.title;l.push({name:"Reload",params:{title:e}})}}),400)};return(e,t)=>{const o=X,r=w("router-view");return c(),m("div",K,[k(n).show_watermark?(c(),_(o,{key:0,font:s,"z-index":9999,gap:[180,150],class:"absolute inset-0 pointer-events-none",content:k(p).userInfo.nickName},null,8,["font","content"])):M("",!0),I(F),L("div",Q,["normal"===k(n).side_mode||"mobile"===k(a)&&"head"==k(n).side_mode||"mobile"===k(a)&&"combination"==k(n).side_mode?(c(),_(R,{key:0})):M("",!0),"combination"===k(n).side_mode&&"mobile"!==k(a)?(c(),_(R,{key:1,mode:"normal"})):M("",!0),L("div",Z,[k(n).showTabs?(c(),_(W,{key:0})):M("",!0),L("div",{class:z(["overflow-auto",k(n).showTabs?"gva-container2":"gva-container pt-1"])},[B.value?(c(),_(r,{key:0},{default:S((({Component:e,route:t})=>[L("div",Y,[I(N,{mode:"out-in",name:"el-fade-in-linear"},{default:S((()=>[(c(),_(T,{include:k(d).keepAliveRouters},[(c(),_(P(e),{key:t.fullPath}))],1032,["include"]))])),_:2},1024)])])),_:1})):M("",!0),I(G)],2)])])])}}});export{ee as default};
