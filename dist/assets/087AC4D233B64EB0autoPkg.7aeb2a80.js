/*! 
 Build based on gin-vue-admin 
 Time : 1725432472000 */
import{a as e,o as a,c as l,d as t,b as o,w as s,g as i,O as r,P as p,h as m,j as u,au as d,E as n,l as c}from"./087AC4D233B64EB0index.70d09b05.js";/* empty css                               *//* empty css                                */import{a as B,E as g}from"./087AC4D233B64EB0form-item.cbb99123.js";/* empty css                            *//* empty css                               *//* empty css                                  *//* empty css                               *//* empty css                              */import{E as f,a as C}from"./087AC4D233B64EB0table-column.87522e19.js";import"./087AC4D233B64EB0checkbox.946614c0.js";/* empty css                                *//* empty css                               */import{j as b,k as v,d as E,m as j}from"./087AC4D233B64EB0autoCode.8131c587.js";import{_ as A}from"./087AC4D233B64EB0warningBar.fba111b1.js";import{E as D,a as k}from"./087AC4D233B64EB0index.46727ea4.js";import{E as w}from"./087AC4D233B64EB0index.cf7c943f.js";import"./087AC4D233B64EB0castArray.0e034210.js";import"./087AC4D233B64EB0_baseClone.a58dc1a4.js";import"./087AC4D233B64EB0_Uint8Array.b8c6af2c.js";import"./087AC4D233B64EB0_initCloneObject.073b420a.js";import"./087AC4D233B64EB0index.86c76e0e.js";import"./087AC4D233B64EB0index.c39333f3.js";import"./087AC4D233B64EB0index.a54c8ec8.js";import"./087AC4D233B64EB0_baseIteratee.bc07217d.js";import"./087AC4D233B64EB0isEqual.754d772a.js";import"./087AC4D233B64EB0debounce.034956aa.js";import"./087AC4D233B64EB0index.0adebf5a.js";import"./087AC4D233B64EB0index.25218fc3.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.1dceca3e.js";import"./087AC4D233B64EB0use-dialog.2e6e6d78.js";const y={class:"gva-table-box"},_={class:"gva-btn-list gap-3 flex items-center"},h={class:"flex justify-between items-center"},x=o("span",{class:"text-lg"},"创建Package",-1),V=Object.assign({name:"AutoPkg"},{__name:"autoPkg",setup(V){const N=e({packageName:"",template:"",label:"",desc:""}),U=e([]);(async()=>{const e=await b();0===e.code&&(U.value=e.data)})();const P=(e,a,l)=>{/^\d+$/.test(a[0])?l(new Error("不能够以数字开头")):l()},q=e({packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{validator:P,trigger:"blur"}],template:[{required:!0,message:"请选择模板",trigger:"change"},{validator:P,trigger:"blur"}]}),T=e(!1),O=()=>{T.value=!1,N.value={packageName:"",template:"",label:"",desc:""}},z=e(null),I=async()=>{z.value.validate((async e=>{if(e){0===(await v(N.value)).code&&u({type:"success",message:"添加成功",showClose:!0}),K(),O()}}))},F=e([]),K=async()=>{const e=await E();0===e.code&&(F.value=e.data.pkgs)};return K(),(e,b)=>{const v=n,E=f,V=C,P=c,L=B,M=D,Q=k,S=g,$=w;return a(),l("div",null,[t(A,{href:"https://www.bilibili.com/video/BV1kv4y1g7nT?p=3",title:"此功能为开发环境使用，不建议发布到生产，具体使用效果请看视频https://www.bilibili.com/video/BV1kv4y1g7nT?p=3"}),o("div",y,[o("div",_,[t(v,{type:"primary",icon:"plus",onClick:b[0]||(b[0]=e=>{T.value=!0})},{default:s((()=>[i(" 新增 ")])),_:1})]),t(V,{data:F.value},{default:s((()=>[t(E,{align:"left",label:"id",width:"60",prop:"ID"}),t(E,{align:"left",label:"包名",width:"150",prop:"packageName"}),t(E,{align:"left",label:"模板",width:"150",prop:"template"}),t(E,{align:"left",label:"展示名",width:"150",prop:"label"}),t(E,{align:"left",label:"描述","min-width":"150",prop:"desc"}),t(E,{align:"left",label:"操作",width:"200"},{default:s((e=>[t(v,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{d.confirm("此操作仅删除数据库中的pkg存储，后端相应目录结构请自行删除与数据库保持一致！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await j(e)).code&&(u({type:"success",message:"删除成功!"}),K())}))})(e.row)},{default:s((()=>[i(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])]),t($,{modelValue:T.value,"onUpdate:modelValue":b[5]||(b[5]=e=>T.value=e),size:"40%","show-close":!1},{header:s((()=>[o("div",h,[x,o("div",null,[t(v,{onClick:O},{default:s((()=>[i(" 取 消 ")])),_:1}),t(v,{type:"primary",onClick:I},{default:s((()=>[i(" 确 定 ")])),_:1})])])])),default:s((()=>[t(A,{title:"模板package会创建集成于项目本体中的代码包，模板plugin会创建插件包"}),t(S,{ref_key:"pkgForm",ref:z,model:N.value,rules:q.value,"label-width":"80px"},{default:s((()=>[t(L,{label:"包名",prop:"packageName"},{default:s((()=>[t(P,{modelValue:N.value.packageName,"onUpdate:modelValue":b[1]||(b[1]=e=>N.value.packageName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(L,{label:"模板",prop:"template"},{default:s((()=>[t(Q,{modelValue:N.value.template,"onUpdate:modelValue":b[2]||(b[2]=e=>N.value.template=e)},{default:s((()=>[(a(!0),l(r,null,p(U.value,(e=>(a(),m(M,{label:e,value:e,key:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),t(L,{label:"展示名",prop:"label"},{default:s((()=>[t(P,{modelValue:N.value.label,"onUpdate:modelValue":b[3]||(b[3]=e=>N.value.label=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),t(L,{label:"描述",prop:"desc"},{default:s((()=>[t(P,{modelValue:N.value.desc,"onUpdate:modelValue":b[4]||(b[4]=e=>N.value.desc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue"])])}}});export{V as default};
